# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ êµ¬ì„±ë„

## ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤](#ì‚¬ìš©ì-ì‹œë‚˜ë¦¬ì˜¤)
3. [ì•„í‚¤í…ì²˜ ë ˆì´ì–´](#ì•„í‚¤í…ì²˜-ë ˆì´ì–´)
4. [ì»´í¬ë„ŒíŠ¸ êµ¬ì„±ë„](#ì»´í¬ë„ŒíŠ¸-êµ¬ì„±ë„)
5. [ë°ì´í„° íë¦„ë„](#ë°ì´í„°-íë¦„ë„)
6. [ê¸°ìˆ  ìŠ¤íƒ êµ¬ì„±](#ê¸°ìˆ -ìŠ¤íƒ-êµ¬ì„±)
7. [íŒŒì¼ ë³´ì•ˆ ë° ì•”í˜¸í™”](#íŒŒì¼-ë³´ì•ˆ-ë°-ì•”í˜¸í™”)
8. [ë°°í¬ êµ¬ì¡°](#ë°°í¬-êµ¬ì¡°)
9. [í™•ì¥ì„± ì „ëµ](#í™•ì¥ì„±-ì „ëµ)

---

## ì‹œìŠ¤í…œ ê°œìš”

### í”„ë¡œì íŠ¸ ëª©í‘œ
- **ë‹¨ì¼ í™”ë©´ ë§ˆí¬ë‹¤ìš´ ë·°ì–´**: íŒŒì¼ì„ ì—´ë©´ ì¦‰ì‹œ ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ ì— ì§‘ì¤‘
- **Google ë¡œê·¸ì¸ ê¸°ë°˜**: Google OAuthë¥¼ í†µí•œ ì‚¬ìš©ì ì¸ì¦ ë° ì‚¬ìš©ìë³„ í´ë” ê´€ë¦¬
- **ë©€í‹°í…Œë„ŒíŠ¸ êµ¬ì¡°**: ì‚¬ìš©ìë³„ ë…ë¦½ì ì¸ í´ë” êµ¬ì¡°ë¡œ ë°ì´í„° ê²©ë¦¬
- **NAS ìš°ì„  ë°°í¬**: ì´ˆê¸° ë°°í¬ëŠ” í™ˆ NAS, í–¥í›„ í´ë¼ìš°ë“œ ì „í™˜ ê°€ëŠ¥
- **ìˆ˜ìµí™”**: Google AdSenseë¥¼ í†µí•œ ê´‘ê³  ìˆ˜ìµ
- **í™•ì¥ì„±**: í•˜ë£¨ 1000ëª… ì´ìƒ ì‚¬ìš©ì ì§€ì›, ìµœëŒ€ 5000ëª…ê¹Œì§€ í™•ì¥ ê°€ëŠ¥
- **UX/UI**: ì§ê´€ì ì¸ ì•„ì´ì½˜ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤, ë§¤ìš° í¸ì•ˆí•œ ì‚¬ìš©ì ê²½í—˜

### í•™ìŠµ ë° ê²½í—˜ ëª©í‘œ
ì´ í”„ë¡œì íŠ¸ëŠ” **ì‹¤ë¬´ì—ì„œ ìš”êµ¬ë˜ëŠ” í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒì„ ê²½í—˜**í•˜ê¸° ìœ„í•œ í•™ìŠµ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤:
- **Kubernetes**: ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë°°í¬ ê²½í—˜
- **ë¹„ë™ê¸° ì²˜ë¦¬**: MQ (RabbitMQ) ë˜ëŠ” Kafkaë¥¼ í™œìš©í•œ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë° ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜
- **ìºì‹± ì „ëµ**: ë‹¤ì–‘í•œ ìºì‹± ë ˆì´ì–´ (L1/L2 ìºì‹œ, ë¶„ì‚° ìºì‹œ, CDN) ì„¤ê³„ ë° êµ¬í˜„
- **ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ëŒ€ì‘**: ë¡œë“œ ë°¸ëŸ°ì‹±, ì˜¤í† ìŠ¤ì¼€ì¼ë§, ë°ì´í„°ë² ì´ìŠ¤ ìƒ¤ë”©, ì„±ëŠ¥ ìµœì í™”
- **ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ì„±**: ë©”íŠ¸ë¦­, ë¡œê¹…, íŠ¸ë ˆì´ì‹±ì„ í†µí•œ ì‹œìŠ¤í…œ ê°€ì‹œì„± í™•ë³´

### í•µì‹¬ ê¸°ëŠ¥
1. **Google ë¡œê·¸ì¸**: Google OAuth 2.0ì„ í†µí•œ ì‚¬ìš©ì ì¸ì¦
2. **ì‚¬ìš©ìë³„ í´ë” ê´€ë¦¬**: ê° ì‚¬ìš©ìë§ˆë‹¤ ë…ë¦½ì ì¸ í´ë” êµ¬ì¡° (`/users/{userId}/`)
3. **ë§ˆí¬ë‹¤ìš´ ë·°ì–´**: íŒŒì¼ ì—´ê¸° ì‹œ ì¦‰ì‹œ ë Œë”ë§ëœ ì½˜í…ì¸  í‘œì‹œ
4. **í¸ì§‘ ê¸°ëŠ¥**: ì„ íƒì  í¸ì§‘ ëª¨ë“œ (ë”ë¸”í´ë¦­ ë˜ëŠ” ì•„ì´ì½˜ í´ë¦­)
5. **Smart Paste**: ë¶™ì—¬ë„£ê¸° ì‹œ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ìë™ ì¸ì‹ ë° ë Œë”ë§
6. **íŒŒì¼ ê´€ë¦¬**: ì‚¬ìš©ì ìì‹ ì˜ í´ë” ë‚´ì—ì„œ íŒŒì¼ ê´€ë¦¬ (URL íŒŒë¼ë¯¸í„° ë˜ëŠ” ë“œë˜ê·¸ì•¤ë“œë¡­)
7. **ì„¸ì…˜ ê´€ë¦¬**: JWT ë˜ëŠ” ì„¸ì…˜ ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ ìœ ì§€
8. **ê´‘ê³  í†µí•©**: Google AdSense ê´‘ê³  í‘œì‹œ
9. **ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ ë°©ì§€**: íƒ­ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œ ìë™ ìƒˆë¡œê³ ì¹¨ ë° íŒŒì¼ ë³€ê²½ ê°ì§€ ì¤‘ì§€
10. **ë§ˆì§€ë§‰ ë¬¸ì„œ ìë™ ë¡œë“œ**: ë¡œê·¸ì¸ í›„ ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜ì •í•˜ë˜ ë¬¸ì„œ ìë™ ë¡œë“œ
11. **ìë™ ì €ì¥**: í¸ì§‘ ì¤‘ ì£¼ê¸°ì ìœ¼ë¡œ ìë™ ì €ì¥ (ë¡œì»¬ ì„ì‹œ ì €ì¥ + ì„œë²„ ì €ì¥)
12. **ë¡œì»¬ íŒŒì¼ ê´€ë¦¬**: ì»´í“¨í„°ì˜ ë¡œì»¬ íŒŒì¼ ì½ê¸°/ì €ì¥ ê¸°ëŠ¥
13. **íŒŒì¼ ì•”í˜¸í™”**: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì•”í˜¸í™”ë¡œ ê°œì¸ íŒŒì¼ ë³´í˜¸
14. **ë¡œì»¬ ì „ìš© ëª¨ë“œ**: ì„œë²„ì— ì €ì¥í•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œë§Œ ì‘ì—… ê°€ëŠ¥
15. **íŒŒì¼ ì‚­ì œ ì˜µì…˜**: ì„œë²„ì—ì„œ ì™„ì „ ì‚­ì œ ë˜ëŠ” ì•ˆì „ ì‚­ì œ ì˜µì…˜

---

## ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### ì „ì²´ ì‚¬ìš©ì íë¦„

```
[ì‚¬ìš©ìê°€ ì›¹ì‚¬ì´íŠ¸ ì ‘ì†]
  â”‚
  â–¼
[ë¡œê·¸ì¸ í˜ì´ì§€]
  â”‚
  â”‚ 1. "Googleë¡œ ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
  â”‚
  â–¼
[Google OAuth ì¸ì¦]
  â”‚
  â”‚ 2. Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
  â”‚
  â–¼
[ì¸ì¦ ì™„ë£Œ, ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸]
  â”‚
  â”‚ 3. ë§ˆì§€ë§‰ ìˆ˜ì • ë¬¸ì„œ ìë™ ë¡œë“œ
  â”‚    - localStorageì—ì„œ ë§ˆì§€ë§‰ ë¬¸ì„œ ê²½ë¡œ í™•ì¸
  â”‚    - ë˜ëŠ” ì„œë²„ì—ì„œ ë§ˆì§€ë§‰ ìˆ˜ì • ë¬¸ì„œ ì •ë³´ ì¡°íšŒ
  â”‚
  â–¼
[ë©”ì¸ ë·°ì–´ í™”ë©´]
  â”‚
  â”œâ”€ [ë§ˆì§€ë§‰ ë¬¸ì„œê°€ ìˆìœ¼ë©´]
  â”‚   â””â”€â–º [í•´ë‹¹ ë¬¸ì„œ ìë™ ë¡œë“œ ë° í‘œì‹œ]
  â”‚
  â””â”€ [ë§ˆì§€ë§‰ ë¬¸ì„œê°€ ì—†ìœ¼ë©´]
      â””â”€â–º [ë¹ˆ í™”ë©´ ë˜ëŠ” íŒŒì¼ ì„ íƒ ì•ˆë‚´]
  â”‚
  â”‚ 4. ì‚¬ìš©ì ì‘ì—… ì˜µì…˜:
  â”‚
  â”œâ”€ [í´ë”/íŒŒì¼ ê´€ë¦¬ ì°½ ì—´ê¸°]
  â”‚   â”‚
  â”‚   â””â”€â–º [ì‚¬ì´ë“œë°” ë˜ëŠ” ëª¨ë‹¬ë¡œ íŒŒì¼ ëª©ë¡ í‘œì‹œ]
  â”‚       â”‚
  â”‚       â””â”€â–º [íŒŒì¼ ì„ íƒ ì‹œ í•´ë‹¹ íŒŒì¼ ë¡œë“œ]
  â”‚
  â”œâ”€ [ë¡œì»¬ íŒŒì¼ ì½ê¸°]
  â”‚   â”‚
  â”‚   â””â”€â–º [íŒŒì¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸]
  â”‚       â”‚
  â”‚       â””â”€â–º [ë¡œì»¬ íŒŒì¼ ì½ì–´ì„œ ë·°ì–´ì— í‘œì‹œ]
  â”‚
  â””â”€ [ìƒˆ ë¬¸ì„œ ìƒì„±]
      â”‚
      â””â”€â–º [ë¹ˆ í¸ì§‘ê¸° ì—´ê¸°]
  â”‚
  â”‚ 5. ë¬¸ì„œ í¸ì§‘ ì‹œì‘
  â”‚    - ë”ë¸”í´ë¦­ ë˜ëŠ” í¸ì§‘ ì•„ì´ì½˜ í´ë¦­
  â”‚
  â–¼
[í¸ì§‘ ëª¨ë“œ]
  â”‚
  â”‚ 6. ìë™ ì €ì¥ ì‹œì‘
  â”‚    - localStorageì— ì„ì‹œ ì €ì¥ (ì¦‰ì‹œ)
  â”‚    - ì„œë²„ì— ì£¼ê¸°ì  ì €ì¥ (ì˜ˆ: 3ë¶„ë§ˆë‹¤)
  â”‚
  â”‚ 7. í¸ì§‘ ì¤‘...
  â”‚    - íƒ€ì´í•‘, ë¶™ì—¬ë„£ê¸° ë“±
  â”‚    - ë³€ê²½ì‚¬í•­ì€ localStorageì— ì¦‰ì‹œ ì €ì¥
  â”‚
  â”‚ 8. ìë™ ì €ì¥ ì‹¤í–‰ (3ë¶„ë§ˆë‹¤)
  â”‚    - ë³€ê²½ì‚¬í•­ì´ ìˆìœ¼ë©´ ì„œë²„ì— ì €ì¥
  â”‚    - ì €ì¥ ì„±ê³µ ì‹œ localStorageì˜ ë³€ê²½ í”Œë˜ê·¸ ì´ˆê¸°í™”
  â”‚
  â”‚ 9. í•„ìš”ì‹œ ìˆ˜ë™ ì €ì¥
  â”‚    - Ctrl+S ë˜ëŠ” ì €ì¥ ë²„íŠ¼
  â”‚    - ì¦‰ì‹œ ì„œë²„ì— ì €ì¥
  â”‚
  â”‚ 10. ë¡œì»¬ íŒŒì¼ë¡œ ì €ì¥ (ì„ íƒì )
  â”‚     - "ë¡œì»¬ì— ì €ì¥" ë²„íŠ¼ í´ë¦­
  â”‚     - ë¸Œë¼ìš°ì € ë‹¤ìš´ë¡œë“œ ë˜ëŠ” File System Access API ì‚¬ìš©
  â”‚
  â”‚ 11. í¸ì§‘ ì¢…ë£Œ
  â”‚     - "ë‹«ê¸°" ë²„íŠ¼ ë˜ëŠ” ESC í‚¤
  â”‚     - ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ í™•ì¸
  â”‚     - í™•ì¸ í›„ ë·°ì–´ ëª¨ë“œë¡œ ì „í™˜
  â”‚
  â–¼
[ë·°ì–´ ëª¨ë“œ]
  â”‚
  â”‚ 12. ë‹¤ë¥¸ íŒŒì¼ ì„ íƒ ë˜ëŠ” ë¡œê·¸ì•„ì›ƒ
  â”‚
  â–¼
[ì¢…ë£Œ ë˜ëŠ” ë‹¤ìŒ ì‘ì—…]
```

### ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸

#### 1. ë§ˆì§€ë§‰ ë¬¸ì„œ ìë™ ë¡œë“œ

**êµ¬í˜„ ë°©ë²•:**
- **localStorage ì‚¬ìš©**: ë¸Œë¼ìš°ì €ì— ë§ˆì§€ë§‰ ë¬¸ì„œ ê²½ë¡œ ì €ì¥
- **ì„œë²„ ë©”íƒ€ë°ì´í„°**: ì‚¬ìš©ìì˜ ë§ˆì§€ë§‰ ìˆ˜ì • ë¬¸ì„œ ì •ë³´ë¥¼ DBì— ì €ì¥

**ìš°ì„ ìˆœìœ„:**
1. localStorageì˜ `lastDocumentPath` í™•ì¸
2. ì—†ìœ¼ë©´ ì„œë²„ API í˜¸ì¶œ: `GET /api/users/me/last-document`
3. ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ë¹ˆ í™”ë©´ í‘œì‹œ

#### 2. í´ë” ë° íŒŒì¼ ê´€ë¦¬ ì°½

**UI êµ¬ì„±:**
- ì‚¬ì´ë“œë°” ë˜ëŠ” ëª¨ë‹¬ í˜•íƒœ
- í´ë” íŠ¸ë¦¬ êµ¬ì¡° í‘œì‹œ
- íŒŒì¼ ëª©ë¡ (ì´ë¦„, ìˆ˜ì •ì¼, í¬ê¸°)
- ê²€ìƒ‰ ê¸°ëŠ¥
- ìƒˆ íŒŒì¼/í´ë” ìƒì„±

**ê¸°ëŠ¥:**
- íŒŒì¼ í´ë¦­ ì‹œ ì¦‰ì‹œ ë¡œë“œ
- ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ íŒŒì¼ ì—´ê¸°
- ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (ì‚­ì œ, ì´ë¦„ ë³€ê²½ ë“±)

#### 3. ìë™ ì €ì¥ ë©”ì»¤ë‹ˆì¦˜

**Redis ì‚¬ìš©ì— ëŒ€í•œ ë‹µë³€:**
âŒ **RedisëŠ” ìë™ ì €ì¥ì— ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

**ì´ìœ :**
- ìë™ ì €ì¥ì€ **ì‚¬ìš©ìë³„ ë¡œì»¬ ìƒíƒœ**ì´ë¯€ë¡œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì í•©
- RedisëŠ” **ì„œë²„ ì¸¡ ê³µìœ  ìƒíƒœ** ê´€ë¦¬ì— ì‚¬ìš© (ìºì‹±, ì„¸ì…˜ ë“±)
- ìë™ ì €ì¥ì€ ë¸Œë¼ìš°ì €ì˜ **localStorage**ì— ì„ì‹œ ì €ì¥ í›„ ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ì— ì €ì¥

**ê¶Œì¥ êµ¬ì¡°:**
```
[í¸ì§‘ ì¤‘]
  â”‚
  â”‚ ë³€ê²½ì‚¬í•­ ë°œìƒ
  â”‚
  â–¼
[localStorageì— ì¦‰ì‹œ ì €ì¥]
  - í‚¤: "draft_{filePath}"
  - ê°’: { content: "...", timestamp: "..." }
  â”‚
  â”‚ (3ë¶„ë§ˆë‹¤ ë˜ëŠ” ë³€ê²½ì‚¬í•­ ëˆ„ì  ì‹œ)
  â”‚
  â–¼
[ì„œë²„ì— ì €ì¥]
  POST /api/files/{path}
  Body: { content: "..." }
  â”‚
  â”‚
  â–¼
[ì„œë²„ ì‘ë‹µ ì„±ê³µ]
  - localStorageì˜ ë³€ê²½ í”Œë˜ê·¸ ì´ˆê¸°í™”
  - ë§ˆì§€ë§‰ ì €ì¥ ì‹œê°„ ì—…ë°ì´íŠ¸
```

**Redisì˜ ì˜¬ë°”ë¥¸ ì‚¬ìš©ì²˜:**
- âœ… ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ê²°ê³¼ ìºì‹±
- âœ… íŒŒì¼ ë©”íƒ€ë°ì´í„° ìºì‹±
- âœ… ì„¸ì…˜ ê´€ë¦¬ (ì„ íƒì )
- âœ… ë¶„ì‚° í™˜ê²½ì—ì„œ ê³µìœ  ìºì‹œ

#### 4. ë¡œì»¬ íŒŒì¼ ì½ê¸°/ì €ì¥

**ì½ê¸°:**
- HTML5 File API ì‚¬ìš©
- `<input type="file">` ë˜ëŠ” File System Access API
- íŒŒì¼ ë‚´ìš©ì„ ì½ì–´ì„œ ë·°ì–´ì— í‘œì‹œ
- ì„œë²„ì— ì—…ë¡œë“œí•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œë§Œ ì‘ì—… ê°€ëŠ¥

**ì €ì¥:**
- ë¸Œë¼ìš°ì € ë‹¤ìš´ë¡œë“œ: `Blob` + `URL.createObjectURL()`
- File System Access API (Chrome/Edge): ì§ì ‘ íŒŒì¼ ì‹œìŠ¤í…œì— ì €ì¥
- ì„œë²„ ì €ì¥ í›„ ë‹¤ìš´ë¡œë“œ

#### 5. í¸ì§‘ ì¢…ë£Œ íë¦„

**ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ:**
1. ë³€ê²½ì‚¬í•­ í™•ì¸
   - localStorageì— ì €ì¥ëœ ë³€ê²½ì‚¬í•­ì´ ìˆëŠ”ì§€ í™•ì¸
   - ì„œë²„ì™€ ë™ê¸°í™”ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ í™•ì¸

2. ì‚¬ìš©ì í™•ì¸
   - ë³€ê²½ì‚¬í•­ì´ ìˆìœ¼ë©´: "ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì €ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
   - ì˜µì…˜: ì €ì¥ í›„ ë‹«ê¸° / ì €ì¥í•˜ì§€ ì•Šê³  ë‹«ê¸° / ì·¨ì†Œ

3. ì •ë¦¬ ì‘ì—…
   - localStorageì˜ ì„ì‹œ ì €ì¥ ë°ì´í„° ì •ë¦¬ (ì„ íƒì )
   - ë§ˆì§€ë§‰ ë¬¸ì„œ ê²½ë¡œ ì—…ë°ì´íŠ¸
   - ë·°ì–´ ëª¨ë“œë¡œ ì „í™˜

### ì‹œë‚˜ë¦¬ì˜¤ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì›¹ì‚¬ì´íŠ¸ ì ‘ì†                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ë¡œê·¸ì¸ í˜ì´ì§€  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Google ë¡œê·¸ì¸   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ì¸ì¦ ì™„ë£Œ, ë©”ì¸ í˜ì´ì§€ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ë§ˆì§€ë§‰ ë¬¸ì„œ ìë™ ë¡œë“œ      â”‚
    â”‚ - localStorage í™•ì¸        â”‚
    â”‚ - ì„œë²„ API í˜¸ì¶œ (ì—†ìœ¼ë©´)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â–¼                 â–¼
[ë¬¸ì„œ ìˆìŒ]    [ë¬¸ì„œ ì—†ìŒ]
    â”‚                 â”‚
    â”‚                 â””â”€â–º [ë¹ˆ í™”ë©´]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ë©”ì¸ ë·°ì–´ í™”ë©´            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸  í‘œì‹œ]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [íŒŒì¼ ê´€ë¦¬] [ë¡œì»¬ íŒŒì¼]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚
    â–¼               â–¼
[íŒŒì¼ ê´€ë¦¬ ì°½]  [ë¡œì»¬ íŒŒì¼]
    â”‚               â”‚
    â”‚               â””â”€â–º [íŒŒì¼ ì„ íƒ]
    â”‚                   â”‚
    â”‚                   â–¼
    â”‚           [ë¡œì»¬ íŒŒì¼ ì½ê¸°]
    â”‚                   â”‚
    â”‚                   â–¼
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º [ë·°ì–´ì— í‘œì‹œ]
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  í¸ì§‘ ëª¨ë“œ    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
  [ìë™ ì €ì¥]  [ìˆ˜ë™ ì €ì¥]  [ë¡œì»¬ ì €ì¥]
  (3ë¶„ë§ˆë‹¤)   (Ctrl+S)    (ë‹¤ìš´ë¡œë“œ)
        â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ë‹«ê¸° ë²„íŠ¼    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ ë³€ê²½ì‚¬í•­ í™•ì¸ â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
  [ì €ì¥ í›„ ë‹«ê¸°] [ì €ì¥ ì•ˆí•¨]  [ì·¨ì†Œ]
        â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ë·°ì–´ ëª¨ë“œ    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê°œì„  ì œì•ˆ ì‚¬í•­

#### 1. ìë™ ì €ì¥ ê°œì„ 
- âœ… **localStorage ì‚¬ìš©**: ì¦‰ì‹œ ì €ì¥, ì˜¤í”„ë¼ì¸ ì§€ì›
- âœ… **ì„œë²„ ì €ì¥**: ì£¼ê¸°ì ìœ¼ë¡œ (3ë¶„) ë˜ëŠ” ë³€ê²½ì‚¬í•­ ëˆ„ì  ì‹œ
- âœ… **ì €ì¥ ìƒíƒœ í‘œì‹œ**: "ìë™ ì €ì¥ë¨" / "ì €ì¥ ì¤‘..." / "ì €ì¥ ì‹¤íŒ¨"
- âŒ **Redis ì‚¬ìš© ì•ˆ í•¨**: ìë™ ì €ì¥ì€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê´€ë¦¬

#### 2. ë§ˆì§€ë§‰ ë¬¸ì„œ ê´€ë¦¬
- localStorageì™€ ì„œë²„ DB ëª¨ë‘ ì‚¬ìš©
- localStorage: ë¹ ë¥¸ ì ‘ê·¼, ë¸Œë¼ìš°ì €ë³„
- ì„œë²„ DB: ëª¨ë“  ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ë§ˆì§€ë§‰ ë¬¸ì„œ ì ‘ê·¼ ê°€ëŠ¥

#### 3. ë¡œì»¬ íŒŒì¼ ê´€ë¦¬
- File System Access API ì§€ì› (Chrome/Edge)
- í´ë°±: ì¼ë°˜ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
- ë¡œì»¬ íŒŒì¼ì€ ì„œë²„ì— ì—…ë¡œë“œí•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œë§Œ ì‘ì—… ê°€ëŠ¥

#### 4. í¸ì§‘ ì¢…ë£Œ íë¦„
- ë³€ê²½ì‚¬í•­ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
- ìë™ ì €ì¥ëœ ë‚´ìš©ë„ í™•ì¸
- í˜ì´ì§€ë¥¼ ë– ë‚  ë•Œë„ í™•ì¸ (beforeunload ì´ë²¤íŠ¸)

---

## ì•„í‚¤í…ì²˜ ë ˆì´ì–´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Browser    â”‚  â”‚  Mobile Web  â”‚  â”‚   Tablet     â”‚     â”‚
â”‚  â”‚   (Desktop)  â”‚  â”‚   Browser    â”‚  â”‚   Browser    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                 â”‚                 â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                           â”‚                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚      Frontend (HTML/CSS/JS)       â”‚              â”‚
â”‚         â”‚  - Google OAuth Login             â”‚              â”‚
â”‚         â”‚  - Single Screen Viewer           â”‚              â”‚
â”‚         â”‚  - Icon-based UI                  â”‚              â”‚
â”‚         â”‚  - Smart Paste Handler            â”‚              â”‚
â”‚         â”‚  - Page Visibility Manager        â”‚              â”‚
â”‚         â”‚  - Session Management             â”‚              â”‚
â”‚         â”‚  - AdSense Integration            â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Application Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Web Server (Nginx/Tomcat)                  â”‚ â”‚
â”‚  â”‚  - Reverse Proxy                                     â”‚ â”‚
â”‚  â”‚  - Static File Serving                               â”‚ â”‚
â”‚  â”‚  - SSL Termination                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Application Server (Spring Boot)              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Auth       â”‚  â”‚   REST API   â”‚  â”‚  Markdownâ”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Controller  â”‚  â”‚  Controller  â”‚  â”‚ Processorâ”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚         â”‚                 â”‚                â”‚        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚            Service Layer                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Auth Service (Google OAuth)                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - User Service                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - File Service                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Markdown Service                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Cache Service                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Message Queue Service (MQ/Kafka)          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚      Async Processing Layer                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - File Upload Worker                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Markdown Rendering Worker                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Event Stream Processor                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚         Security Layer                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - JWT Token Management                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Session Management                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Authorization Filter                        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Data Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   File       â”‚  â”‚    Cache     â”‚  â”‚   Database   â”‚   â”‚
â”‚  â”‚  System      â”‚  â”‚   (Redis)    â”‚  â”‚  (User Info) â”‚   â”‚
â”‚  â”‚  (NAS/Object â”‚  â”‚              â”‚  â”‚              â”‚   â”‚
â”‚  â”‚   Storage)   â”‚  â”‚              â”‚  â”‚ - User ID    â”‚   â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ - Email      â”‚   â”‚
â”‚  â”‚ /users/      â”‚  â”‚              â”‚  â”‚ - Created    â”‚   â”‚
â”‚  â”‚   {userId}/  â”‚  â”‚              â”‚  â”‚              â”‚   â”‚
â”‚  â”‚   files/     â”‚  â”‚              â”‚  â”‚              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Message     â”‚  â”‚  Monitoring â”‚                      â”‚
â”‚  â”‚  Queue       â”‚  â”‚  & Logging  â”‚                      â”‚
â”‚  â”‚  (MQ/Kafka)  â”‚  â”‚  (Prometheusâ”‚                      â”‚
â”‚  â”‚              â”‚  â”‚   /ELK)     â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              External Services                       â”‚ â”‚
â”‚  â”‚  - Google OAuth 2.0 API                             â”‚ â”‚
â”‚  â”‚  - Google AdSense                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì»´í¬ë„ŒíŠ¸ êµ¬ì„±ë„

### í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸

```
Frontend Application
â”‚
â”œâ”€â”€ Auth Component
â”‚   â”œâ”€â”€ Google Login Button
â”‚   â”œâ”€â”€ Login Page
â”‚   â”œâ”€â”€ Session Manager
â”‚   â””â”€â”€ Token Storage (localStorage/sessionStorage)
â”‚
â”œâ”€â”€ Viewer Component (ë©”ì¸ í™”ë©´)
â”‚   â”œâ”€â”€ Header Section
â”‚   â”‚   â”œâ”€â”€ User Profile Display
â”‚   â”‚   â”œâ”€â”€ File Name Display
â”‚   â”‚   â”œâ”€â”€ Edit Icon Button
â”‚   â”‚   â””â”€â”€ Settings Icon Button
â”‚   â”‚
â”‚   â”œâ”€â”€ Content Section
â”‚   â”‚   â”œâ”€â”€ Markdown Renderer
â”‚   â”‚   â”‚   â”œâ”€â”€ HTML Renderer
â”‚   â”‚   â”‚   â”œâ”€â”€ Code Highlighter (Highlight.js)
â”‚   â”‚   â”‚   â””â”€â”€ Style Processor
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Editor (Optional, Full-screen)
â”‚   â”‚       â”œâ”€â”€ Textarea Editor
â”‚   â”‚       â”œâ”€â”€ Smart Paste Handler
â”‚   â”‚       â””â”€â”€ Save Button
â”‚   â”‚
â”‚   â””â”€â”€ Footer Section
â”‚       â””â”€â”€ AdSense Container
â”‚
â”œâ”€â”€ File Handler Component
â”‚   â”œâ”€â”€ User Folder Navigator
â”‚   â”œâ”€â”€ URL Parameter Parser
â”‚   â”œâ”€â”€ Drag & Drop Handler
â”‚   â””â”€â”€ File Open Dialog
â”‚
â”œâ”€â”€ Auto Save Manager Component
â”‚   â”œâ”€â”€ LocalStorage Manager
â”‚   â”œâ”€â”€ Auto Save Timer (3ë¶„ ê°„ê²©)
â”‚   â”œâ”€â”€ Change Detector
â”‚   â””â”€â”€ Save Status Indicator
â”‚
â”œâ”€â”€ Last Document Manager Component
â”‚   â”œâ”€â”€ LocalStorage Handler
â”‚   â”œâ”€â”€ Server API Client
â”‚   â””â”€â”€ Document Loader
â”‚
â”œâ”€â”€ File Manager Component
â”‚   â”œâ”€â”€ Folder Tree Navigator
â”‚   â”œâ”€â”€ File List Display
â”‚   â”œâ”€â”€ File Search
â”‚   â””â”€â”€ Context Menu Handler
â”‚
â”œâ”€â”€ Local File Handler Component
â”‚   â”œâ”€â”€ File Reader (File API)
â”‚   â”œâ”€â”€ File System Access API Handler
â”‚   â””â”€â”€ File Download Manager
â”‚
â”œâ”€â”€ Encryption Component
â”‚   â”œâ”€â”€ Encryption Manager
â”‚   â”‚   â”œâ”€â”€ AES-256-GCM Encryptor
â”‚   â”‚   â”œâ”€â”€ AES-256-GCM Decryptor
â”‚   â”‚   â””â”€â”€ Key Derivation (PBKDF2)
â”‚   â”œâ”€â”€ Password Manager
â”‚   â”‚   â”œâ”€â”€ Password Input Handler
â”‚   â”‚   â”œâ”€â”€ Password Storage (localStorage, encrypted)
â”‚   â”‚   â””â”€â”€ Password Validation
â”‚   â””â”€â”€ Encryption UI
â”‚       â”œâ”€â”€ Encryption Mode Selector
â”‚       â”œâ”€â”€ Password Input Dialog
â”‚       â””â”€â”€ Encryption Status Indicator
â”‚
â”œâ”€â”€ Visibility Manager Component
â”‚   â”œâ”€â”€ Page Visibility API Handler
â”‚   â”œâ”€â”€ Auto-refresh Controller
â”‚   â””â”€â”€ File Change Detector
â”‚
â””â”€â”€ UI Component Library
    â”œâ”€â”€ Icon System (Font Awesome)
    â”œâ”€â”€ Toast Notification
    â”œâ”€â”€ Loading Indicator
    â””â”€â”€ Confirmation Dialog
```

### ë°±ì—”ë“œ ì»´í¬ë„ŒíŠ¸

```
Spring Boot Application
â”‚
â”œâ”€â”€ Controller Layer
â”‚   â”œâ”€â”€ AuthController
â”‚   â”‚   â”œâ”€â”€ GET  /api/auth/google/login      - Google ë¡œê·¸ì¸ ì‹œì‘
â”‚   â”‚   â”œâ”€â”€ GET  /api/auth/google/callback   - Google OAuth ì½œë°±
â”‚   â”‚   â”œâ”€â”€ GET  /api/auth/logout            - ë¡œê·¸ì•„ì›ƒ
â”‚   â”‚   â””â”€â”€ GET  /api/auth/me                - í˜„ì¬ ì‚¬ìš©ì ì •ë³´
â”‚   â”‚
â”‚   â”œâ”€â”€ UserController
â”‚   â”‚   â””â”€â”€ GET  /api/users/me/last-document  - ë§ˆì§€ë§‰ ìˆ˜ì • ë¬¸ì„œ ì¡°íšŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ FileController
â”‚   â”‚   â”œâ”€â”€ GET  /api/files                  - ì‚¬ìš©ì íŒŒì¼ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ GET  /api/files/{path}           - íŒŒì¼ ì½ê¸°
â”‚   â”‚   â”œâ”€â”€ GET  /api/files/{path}/check     - íŒŒì¼ ë³€ê²½ ê°ì§€
â”‚   â”‚   â”œâ”€â”€ POST /api/files                  - íŒŒì¼ ì €ì¥
â”‚   â”‚   â””â”€â”€ POST /api/files/upload           - íŒŒì¼ ì—…ë¡œë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ MarkdownController
â”‚   â”‚   â”œâ”€â”€ POST /api/markdown/render  - ë§ˆí¬ë‹¤ìš´ ë Œë”ë§
â”‚   â”‚   â””â”€â”€ POST /api/markdown/detect  - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ê°ì§€
â”‚   â”‚
â”‚   â””â”€â”€ HealthController
â”‚       â””â”€â”€ GET  /api/health           - í—¬ìŠ¤ ì²´í¬
â”‚
â”œâ”€â”€ Service Layer
â”‚   â”œâ”€â”€ AuthService
â”‚   â”‚   â”œâ”€â”€ authenticateWithGoogle(code)
â”‚   â”‚   â”œâ”€â”€ createOrUpdateUser(googleUserInfo)
â”‚   â”‚   â”œâ”€â”€ generateToken(userId)
â”‚   â”‚   â””â”€â”€ validateToken(token)
â”‚   â”‚
â”‚   â”œâ”€â”€ UserService
â”‚   â”‚   â”œâ”€â”€ getUserById(userId)
â”‚   â”‚   â”œâ”€â”€ getUserByEmail(email)
â”‚   â”‚   â”œâ”€â”€ createUserFolder(userId)
â”‚   â”‚   â”œâ”€â”€ getUserFolderPath(userId)
â”‚   â”‚   â””â”€â”€ getLastModifiedDocument(userId)
â”‚   â”‚
â”‚   â”œâ”€â”€ FileService
â”‚   â”‚   â”œâ”€â”€ listUserFiles(userId, path)
â”‚   â”‚   â”œâ”€â”€ readFile(userId, path)
â”‚   â”‚   â”œâ”€â”€ readEncryptedFile(userId, path)
â”‚   â”‚   â”œâ”€â”€ checkFileModified(userId, path, lastModified)
â”‚   â”‚   â”œâ”€â”€ saveFile(userId, path, content)
â”‚   â”‚   â”œâ”€â”€ saveEncryptedFile(userId, path, encryptedData, iv, tag)
â”‚   â”‚   â”œâ”€â”€ uploadFile(userId, file)
â”‚   â”‚   â”œâ”€â”€ validateFile(userId, path)
â”‚   â”‚   â””â”€â”€ secureDelete(userId, path)
â”‚   â”‚
â”‚   â”œâ”€â”€ MarkdownService
â”‚   â”‚   â”œâ”€â”€ renderMarkdown(content)
â”‚   â”‚   â”œâ”€â”€ detectMarkdownFormat(text)
â”‚   â”‚   â””â”€â”€ processSmartPaste(text)
â”‚   â”‚
â”‚   â””â”€â”€ CacheService
â”‚       â”œâ”€â”€ get(key)
â”‚       â”œâ”€â”€ put(key, value, ttl)
â”‚       â””â”€â”€ invalidate(key)
â”‚
â”œâ”€â”€ Repository Layer
â”‚   â”œâ”€â”€ UserRepository
â”‚   â”‚   â”œâ”€â”€ findById(userId)
â”‚   â”‚   â”œâ”€â”€ findByEmail(email)
â”‚   â”‚   â”œâ”€â”€ save(user)
â”‚   â”‚   â””â”€â”€ existsByEmail(email)
â”‚   â”‚
â”‚   â”œâ”€â”€ FileRepository
â”‚   â”‚   â”œâ”€â”€ readFromNAS(userId, path)
â”‚   â”‚   â”œâ”€â”€ writeToNAS(userId, path, content)
â”‚   â”‚   â”œâ”€â”€ listFiles(userId, directory)
â”‚   â”‚   â””â”€â”€ createUserDirectory(userId)
â”‚   â”‚
â”‚   â””â”€â”€ CacheRepository
â”‚       â””â”€â”€ RedisClient
â”‚
â””â”€â”€ Configuration Layer
    â”œâ”€â”€ SecurityConfig
    â”‚   â”œâ”€â”€ OAuth2 Client Configuration
    â”‚   â”œâ”€â”€ JWT Configuration
    â”‚   â””â”€â”€ Session Configuration
    â”œâ”€â”€ NASConfig
    â”œâ”€â”€ RedisConfig
    â”œâ”€â”€ DatabaseConfig (SQLite/PostgreSQL)
    â””â”€â”€ AdSenseConfig
```

---

## ë°ì´í„° íë¦„ë„

### Google ë¡œê·¸ì¸ íë¦„

```
[User: Click "Login with Google"]
  â”‚
  â–¼
[Frontend: Auth Component]
  â”‚
  â”‚ 1. Redirect to Google OAuth
  â”‚    GET /api/auth/google/login
  â”‚
  â–¼
[Backend: AuthController]
  â”‚
  â”‚ 2. Generate OAuth state token
  â”‚
  â”‚ 3. Redirect to Google OAuth URL
  â”‚    https://accounts.google.com/o/oauth2/v2/auth
  â”‚
  â–¼
[Google OAuth Server]
  â”‚
  â”‚ 4. User authenticates with Google
  â”‚
  â”‚ 5. Google redirects with authorization code
  â”‚    GET /api/auth/google/callback?code=...
  â”‚
  â–¼
[Backend: AuthController]
  â”‚
  â”‚ 6. Exchange code for access token
  â”‚    POST https://oauth2.googleapis.com/token
  â”‚
  â”‚ 7. Get user info from Google
  â”‚    GET https://www.googleapis.com/oauth2/v2/userinfo
  â”‚
  â–¼
[AuthService]
  â”‚
  â”‚ 8. createOrUpdateUser(googleUserInfo)
  â”‚    - Check if user exists (by email)
  â”‚    - Create new user if not exists
  â”‚    - Update user info if exists
  â”‚
  â”‚ 9. createUserFolder(userId)
  â”‚    - Create /users/{userId}/ directory
  â”‚
  â”‚ 10. generateToken(userId)
  â”‚     - Create JWT token
  â”‚
  â–¼
[Backend: AuthController]
  â”‚
  â”‚ 11. Set JWT token in cookie/response
  â”‚
  â”‚ 12. Redirect to main page
  â”‚
  â–¼
[Frontend: Session Manager]
  â”‚
  â”‚ 13. Store token in localStorage
  â”‚
  â”‚ 14. Load user profile
  â”‚
  â–¼
[User: Logged in, redirected to viewer]
```

### íŒŒì¼ ì—´ê¸° íë¦„ (ì¸ì¦ í¬í•¨)

```
[User: Request file] 
  â”‚
  â”‚ 1. URL íŒŒë¼ë¯¸í„° ë˜ëŠ” ë“œë˜ê·¸ì•¤ë“œë¡­
  â”‚
  â–¼
[Frontend: File Handler]
  â”‚
  â”‚ 2. Check authentication token
  â”‚
  â”‚ 3. HTTP GET /api/files/{path}
  â”‚    Headers: Authorization: Bearer {token}
  â”‚
  â–¼
[Backend: Security Filter]
  â”‚
  â”‚ 4. Validate JWT token
  â”‚
  â”‚ 5. Extract userId from token
  â”‚
  â–¼
[Backend: FileController]
  â”‚
  â”‚ 6. Validate path belongs to user
  â”‚    (path must start with /users/{userId}/)
  â”‚
  â”‚ 7. CacheService.get(userId:path)
  â”‚
  â–¼
[CacheService]
  â”‚
  â”œâ”€ Cache Hit â”€â”€â–º [Return Cached Content]
  â”‚
  â””â”€ Cache Miss â”€â”€â–º [FileService.readFile(userId, path)]
                      â”‚
                      â–¼
                   [FileRepository]
                      â”‚
                      â”‚ 8. Read from NAS
                      â”‚    /users/{userId}/files/{path}
                      â”‚
                      â–¼
                   [NAS File System]
                      â”‚
                      â”‚ 9. Return File Content
                      â”‚
                      â–¼
                   [FileService]
                      â”‚
                      â”‚ 10. CacheService.put(userId:path, content)
                      â”‚
                      â–¼
                   [MarkdownService.renderMarkdown(content)]
                      â”‚
                      â”‚ 11. Convert Markdown â†’ HTML
                      â”‚
                      â–¼
                   [Return HTML Response]
                      â”‚
                      â–¼
[Frontend: Viewer Component]
  â”‚
  â”‚ 12. Render HTML with Highlight.js
  â”‚
  â–¼
[User: View Markdown Content]
```

### íŒŒì¼ í¸ì§‘ ë° ì €ì¥ íë¦„ (ì¸ì¦ í¬í•¨)

```
[User: Double-click or Click Edit Icon]
  â”‚
  â–¼
[Frontend: Viewer Component]
  â”‚
  â”‚ 1. Check authentication token
  â”‚
  â”‚ 2. Switch to Editor Mode
  â”‚
  â–¼
[Frontend: Editor Component]
  â”‚
  â”‚ 3. User edits content
  â”‚
  â”‚ 4. User clicks Save or Ctrl+S
  â”‚
  â”‚ 5. HTTP POST /api/files/{path}
  â”‚    Headers: Authorization: Bearer {token}
  â”‚    Body: { content: "..." }
  â”‚
  â–¼
[Backend: Security Filter]
  â”‚
  â”‚ 6. Validate JWT token
  â”‚
  â”‚ 7. Extract userId from token
  â”‚
  â–¼
[Backend: FileController]
  â”‚
  â”‚ 8. Validate path belongs to user
  â”‚    (path must start with /users/{userId}/)
  â”‚
  â”‚ 9. FileService.saveFile(userId, path, content)
  â”‚
  â–¼
[FileService]
  â”‚
  â”‚ 10. Validate content
  â”‚
  â”‚ 11. FileRepository.writeToNAS(userId, path, content)
  â”‚
  â–¼
[FileRepository]
  â”‚
  â”‚ 12. Write to NAS File System
  â”‚     /users/{userId}/files/{path}
  â”‚
  â”‚ 13. Return Success
  â”‚
  â–¼
[FileService]
  â”‚
  â”‚ 14. CacheService.invalidate(userId:path)
  â”‚
  â–¼
[Backend: FileController]
  â”‚
  â”‚ 15. Return Success Response
  â”‚
  â–¼
[Frontend: Editor Component]
  â”‚
  â”‚ 16. Show Success Toast
  â”‚
  â”‚ 17. Reload file content
  â”‚
  â–¼
[User: View Updated Content]
```

### Smart Paste íë¦„

```
[User: Paste Text into Editor]
  â”‚
  â–¼
[Frontend: Editor Component]
  â”‚
  â”‚ 1. Intercept paste event
  â”‚
  â”‚ 2. Extract pasted text
  â”‚
  â”‚ 3. HTTP POST /api/markdown/detect
  â”‚    Body: { text: "..." }
  â”‚
  â–¼
[Backend: MarkdownController]
  â”‚
  â”‚ 4. MarkdownService.detectMarkdownFormat(text)
  â”‚
  â–¼
[MarkdownService]
  â”‚
  â”‚ 5. Analyze text patterns:
  â”‚    - Headers (#, ##, ...)
  â”‚    - Lists (-, *, 1.)
  â”‚    - Code blocks (```)
  â”‚    - Links ([text](url))
  â”‚    - Bold/Italic (**text**, *text*)
  â”‚
  â”‚ 6. Return detection result
  â”‚
  â–¼
[Frontend: Editor Component]
  â”‚
  â”‚ 7. If markdown detected:
  â”‚    - Insert formatted text
  â”‚    - Trigger preview update
  â”‚
  â”‚ 8. If not markdown:
  â”‚    - Insert as plain text
  â”‚
  â–¼
[User: See Formatted Content]
```

### íŒŒì¼ ë³€ê²½ ê°ì§€ ë° ìë™ ìƒˆë¡œê³ ì¹¨ íë¦„ (ë°±ê·¸ë¼ìš´ë“œ ë°©ì§€)

```
[Page Load]
  â”‚
  â”‚ 1. Initialize Visibility Manager
  â”‚
  â–¼
[Visibility Manager]
  â”‚
  â”‚ 2. Register visibilitychange event listener
  â”‚
  â”‚ 3. Check document.visibilityState
  â”‚
  â”œâ”€ Tab Visible â”€â”€â–º [Start File Change Detection]
  â”‚                     â”‚
  â”‚                     â”‚ 4. Set interval (30ì´ˆë§ˆë‹¤)
  â”‚                     â”‚    HTTP GET /api/files/{path}/check
  â”‚                     â”‚    Headers: If-Modified-Since
  â”‚                     â”‚
  â”‚                     â–¼
  â”‚                  [Backend: FileController]
  â”‚                     â”‚
  â”‚                     â”‚ 5. Check file modification time
  â”‚                     â”‚
  â”‚                     â”œâ”€ File Changed â”€â”€â–º [Return 200 with new content]
  â”‚                     â”‚                     â”‚
  â”‚                     â”‚                     â–¼
  â”‚                     â”‚                  [Frontend: Reload File]
  â”‚                     â”‚                     â”‚
  â”‚                     â”‚                     â–¼
  â”‚                     â”‚                  [User: See Updated Content]
  â”‚                     â”‚
  â”‚                     â””â”€ File Not Changed â”€â”€â–º [Return 304 Not Modified]
  â”‚                                               â”‚
  â”‚                                               â–¼
  â”‚                                            [No Action]
  â”‚
  â””â”€ Tab Hidden â”€â”€â–º [Stop File Change Detection]
                       â”‚
                       â”‚ 6. Clear interval
                       â”‚
                       â”‚ 7. Pause auto-refresh
                       â”‚
                       â–¼
                    [No Background Updates]
                       â”‚
                       â”‚ (User switches back to tab)
                       â”‚
                       â–¼
                    [Tab Visible Event]
                       â”‚
                       â”‚ 8. Resume file change detection
                       â”‚
                       â”‚ 9. Check if file changed while hidden
                       â”‚    (One-time check on visibility)
                       â”‚
                       â–¼
                    [Resume Normal Operation]
```

### ë§ˆì§€ë§‰ ë¬¸ì„œ ìë™ ë¡œë“œ íë¦„

```
[User: Login Success]
  â”‚
  â–¼
[Frontend: Last Document Manager]
  â”‚
  â”‚ 1. Check localStorage
  â”‚    key: "lastDocumentPath"
  â”‚
  â”œâ”€ Found in localStorage â”€â”€â–º [Load from localStorage]
  â”‚                               â”‚
  â”‚                               â”‚ 2. HTTP GET /api/files/{path}
  â”‚                               â”‚    Headers: Authorization: Bearer {token}
  â”‚                               â”‚
  â”‚                               â–¼
  â”‚                            [Backend: FileController]
  â”‚                               â”‚
  â”‚                               â”‚ 3. Validate and return file
  â”‚                               â”‚
  â”‚                               â–¼
  â”‚                            [Frontend: Load Document]
  â”‚                               â”‚
  â”‚                               â–¼
  â”‚                            [User: See Last Document]
  â”‚
  â””â”€ Not Found â”€â”€â–º [Check Server]
                      â”‚
                      â”‚ 4. HTTP GET /api/users/me/last-document
                      â”‚    Headers: Authorization: Bearer {token}
                      â”‚
                      â–¼
                   [Backend: UserController]
                      â”‚
                      â”‚ 5. Query database for last modified document
                      â”‚    SELECT * FROM file_metadata
                      â”‚    WHERE user_id = {userId}
                      â”‚    ORDER BY last_modified DESC
                      â”‚    LIMIT 1
                      â”‚
                      â”œâ”€ Document Found â”€â”€â–º [Return document path]
                      â”‚                        â”‚
                      â”‚                        â–¼
                      â”‚                     [Frontend: Load Document]
                      â”‚                        â”‚
                      â”‚                        â”‚ 6. Update localStorage
                      â”‚                        â”‚    localStorage.setItem("lastDocumentPath", path)
                      â”‚                        â”‚
                      â”‚                        â–¼
                      â”‚                     [User: See Last Document]
                      â”‚
                      â””â”€ No Document â”€â”€â–º [Show Empty Screen]
                                           â”‚
                                           â–¼
                                        [User: See Empty Screen or File Selector]
```

### ìë™ ì €ì¥ íë¦„

```
[User: Editing Document]
  â”‚
  â”‚ 1. User types or pastes content
  â”‚
  â–¼
[Frontend: Editor Component]
  â”‚
  â”‚ 2. Content changed event
  â”‚
  â–¼
[Frontend: Auto Save Manager]
  â”‚
  â”‚ 3. Save to localStorage immediately
  â”‚    localStorage.setItem("draft_{filePath}", {
  â”‚      content: "...",
  â”‚      timestamp: Date.now(),
  â”‚      synced: false
  â”‚    })
  â”‚
  â”‚ 4. Update change flag
  â”‚    hasUnsavedChanges = true
  â”‚
  â”‚ 5. Show "ì €ì¥ ì¤‘..." indicator
  â”‚
  â”‚ 6. Start/Reset auto-save timer (3 minutes)
  â”‚
  â”œâ”€ [Timer expires (3 minutes)] â”€â”€â–º [Auto Save to Server]
  â”‚                                     â”‚
  â”‚                                     â”‚ 7. Check if changes exist
  â”‚                                     â”‚    if (!hasUnsavedChanges) return
  â”‚                                     â”‚
  â”‚                                     â”‚ 8. HTTP POST /api/files/{path}
  â”‚                                     â”‚    Headers: Authorization: Bearer {token}
  â”‚                                     â”‚    Body: { content: "..." }
  â”‚                                     â”‚
  â”‚                                     â–¼
  â”‚                                  [Backend: FileController]
  â”‚                                     â”‚
  â”‚                                     â”‚ 9. Validate and save file
  â”‚                                     â”‚
  â”‚                                     â”‚ 10. Update file_metadata.last_modified
  â”‚                                     â”‚
  â”‚                                     â”‚ 11. Return success
  â”‚                                     â”‚
  â”‚                                     â–¼
  â”‚                                  [Frontend: Auto Save Manager]
  â”‚                                     â”‚
  â”‚                                     â”‚ 12. Update localStorage
  â”‚                                     â”‚     draft.synced = true
  â”‚                                     â”‚     draft.lastSynced = Date.now()
  â”‚                                     â”‚
  â”‚                                     â”‚ 13. Clear change flag
  â”‚                                     â”‚     hasUnsavedChanges = false
  â”‚                                     â”‚
  â”‚                                     â”‚ 14. Show "ìë™ ì €ì¥ë¨" indicator
  â”‚                                     â”‚
  â”‚                                     â–¼
  â”‚                                  [User: See Save Status]
  â”‚
  â””â”€ [User clicks Save (Ctrl+S)] â”€â”€â–º [Manual Save]
                                        â”‚
                                        â”‚ 15. HTTP POST /api/files/{path}
                                        â”‚     (Same as auto-save)
                                        â”‚
                                        â”‚ 16. Show "ì €ì¥ë¨" toast
                                        â”‚
                                        â–¼
                                     [User: See Save Confirmation]
```

### ë¡œì»¬ íŒŒì¼ ì½ê¸°/ì €ì¥ íë¦„

```
[User: Click "ë¡œì»¬ íŒŒì¼ ì½ê¸°"]
  â”‚
  â–¼
[Frontend: Local File Handler]
  â”‚
  â”‚ 1. Check File System Access API support
  â”‚
  â”œâ”€ Supported â”€â”€â–º [Use File System Access API]
  â”‚                  â”‚
  â”‚                  â”‚ 2. window.showOpenFilePicker()
  â”‚                  â”‚
  â”‚                  â”‚ 3. User selects file
  â”‚                  â”‚
  â”‚                  â”‚ 4. Read file content
  â”‚                  â”‚    file.text() or file.stream()
  â”‚                  â”‚
  â”‚                  â”‚ 5. Display in viewer/editor
  â”‚                  â”‚
  â”‚                  â”‚ 6. Store file handle for later save
  â”‚                  â”‚
  â”‚                  â–¼
  â”‚               [User: See File Content]
  â”‚
  â””â”€ Not Supported â”€â”€â–º [Use Traditional File Input]
                         â”‚
                         â”‚ 7. <input type="file"> click()
                         â”‚
                         â”‚ 8. User selects file
                         â”‚
                         â”‚ 9. FileReader API
                         â”‚    reader.readAsText(file)
                         â”‚
                         â”‚ 10. Display in viewer/editor
                         â”‚
                         â–¼
                      [User: See File Content]
  â”‚
  â”‚ (User edits and wants to save locally)
  â”‚
  â–¼
[User: Click "ë¡œì»¬ì— ì €ì¥"]
  â”‚
  â–¼
[Frontend: Local File Handler]
  â”‚
  â”‚ 11. Check if file handle exists (File System Access API)
  â”‚
  â”œâ”€ File Handle Exists â”€â”€â–º [Use File System Access API]
  â”‚                          â”‚
  â”‚                          â”‚ 12. fileHandle.createWritable()
  â”‚                          â”‚
  â”‚                          â”‚ 13. Write content
  â”‚                          â”‚     writable.write(content)
  â”‚                          â”‚
  â”‚                          â”‚ 14. Close file
  â”‚                          â”‚     writable.close()
  â”‚                          â”‚
  â”‚                          â–¼
  â”‚                       [User: File Saved Locally]
  â”‚
  â””â”€ No File Handle â”€â”€â–º [Use Download API]
                         â”‚
                         â”‚ 15. Create Blob
                         â”‚     blob = new Blob([content], { type: 'text/markdown' })
                         â”‚
                         â”‚ 16. Create download link
                         â”‚     url = URL.createObjectURL(blob)
                         â”‚
                         â”‚ 17. Trigger download
                         â”‚     <a download="file.md" href={url}>.click()
                         â”‚
                         â”‚ 18. Revoke URL
                         â”‚     URL.revokeObjectURL(url)
                         â”‚
                         â–¼
                      [User: File Downloaded]
```

### í¸ì§‘ ì¢…ë£Œ íë¦„

```
[User: Click "ë‹«ê¸°" Button]
  â”‚
  â–¼
[Frontend: Editor Component]
  â”‚
  â”‚ 1. Check for unsaved changes
  â”‚    - Check localStorage draft
  â”‚    - Check hasUnsavedChanges flag
  â”‚    - Compare with last synced version
  â”‚
  â”œâ”€ No Changes â”€â”€â–º [Close Editor]
  â”‚                   â”‚
  â”‚                   â”‚ 2. Switch to viewer mode
  â”‚                   â”‚
  â”‚                   â”‚ 3. Clear editor state
  â”‚                   â”‚
  â”‚                   â–¼
  â”‚                [User: Back to Viewer]
  â”‚
  â””â”€ Has Changes â”€â”€â–º [Show Confirmation Dialog]
                       â”‚
                       â”‚ 4. "ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤."
                       â”‚    Options:
                       â”‚    - ì €ì¥ í›„ ë‹«ê¸°
                       â”‚    - ì €ì¥í•˜ì§€ ì•Šê³  ë‹«ê¸°
                       â”‚    - ì·¨ì†Œ
                       â”‚
                       â”œâ”€ [ì €ì¥ í›„ ë‹«ê¸°] â”€â”€â–º [Save and Close]
                       â”‚                       â”‚
                       â”‚                       â”‚ 5. HTTP POST /api/files/{path}
                       â”‚                       â”‚
                       â”‚                       â”‚ 6. Wait for save completion
                       â”‚                       â”‚
                       â”‚                       â”‚ 7. Clear localStorage draft
                       â”‚                       â”‚
                       â”‚                       â”‚ 8. Switch to viewer mode
                       â”‚                       â”‚
                       â”‚                       â–¼
                       â”‚                    [User: Back to Viewer]
                       â”‚
                       â”œâ”€ [ì €ì¥í•˜ì§€ ì•Šê³  ë‹«ê¸°] â”€â”€â–º [Discard and Close]
                       â”‚                            â”‚
                       â”‚                            â”‚ 9. Clear localStorage draft
                       â”‚                            â”‚
                       â”‚                            â”‚ 10. Switch to viewer mode
                       â”‚                            â”‚
                       â”‚                            â–¼
                       â”‚                         [User: Back to Viewer]
                       â”‚
                       â””â”€ [ì·¨ì†Œ] â”€â”€â–º [Stay in Editor]
                                      â”‚
                                      â–¼
                                   [User: Continue Editing]
```

### ì‹œë‚˜ë¦¬ì˜¤ íë¦„ ê²€í†  ë° ê°œì„  ì‚¬í•­

#### âœ… ì˜ ì„¤ê³„ëœ ë¶€ë¶„

1. **ë¡œê·¸ì¸ í›„ ë§ˆì§€ë§‰ ë¬¸ì„œ ìë™ ë¡œë“œ**
   - ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ
   - localStorageì™€ ì„œë²„ DB ì´ì¤‘ ì €ì¥ìœ¼ë¡œ ì•ˆì •ì„± í™•ë³´

2. **í´ë” ë° íŒŒì¼ ê´€ë¦¬ ì°½**
   - ì§ê´€ì ì¸ íŒŒì¼ íƒìƒ‰
   - ì‚¬ì´ë“œë°” ë˜ëŠ” ëª¨ë‹¬ë¡œ êµ¬í˜„ ê°€ëŠ¥

3. **ìë™ ì €ì¥ ë©”ì»¤ë‹ˆì¦˜**
   - localStorage ì¦‰ì‹œ ì €ì¥ìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ë°©ì§€
   - ì£¼ê¸°ì  ì„œë²„ ì €ì¥ìœ¼ë¡œ ë™ê¸°í™”

4. **ë¡œì»¬ íŒŒì¼ ì½ê¸°/ì €ì¥**
   - File System Access API í™œìš©
   - ì˜¤í”„ë¼ì¸ ì‘ì—… ì§€ì›

#### âš ï¸ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„

1. **ìë™ ì €ì¥ íƒ€ì´ë°**
   - **í˜„ì¬**: 3ë¶„ë§ˆë‹¤ ê³ ì •
   - **ê°œì„  ì œì•ˆ**: 
     - íƒ€ì´í•‘ ì¤‘ì§€ í›„ 5ì´ˆ (debounce)
     - ë˜ëŠ” ë³€ê²½ì‚¬í•­ ëˆ„ì  ì‹œ (ì˜ˆ: 100ì ì´ìƒ ë³€ê²½)
     - ì‚¬ìš©ì ì„¤ì • ê°€ëŠ¥í•˜ê²Œ

2. **ë§ˆì§€ë§‰ ë¬¸ì„œ ë¡œë“œ ì‹¤íŒ¨ ì²˜ë¦¬**
   - ë¬¸ì„œê°€ ì‚­ì œë˜ì—ˆê±°ë‚˜ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°
   - **í•´ê²°**: ì—ëŸ¬ ì²˜ë¦¬ ë° ë¹ˆ í™”ë©´ í‘œì‹œ

3. **í¸ì§‘ ì¢…ë£Œ ì‹œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸**
   - í˜ì´ì§€ë¥¼ ë– ë‚  ë•Œë„ í™•ì¸ í•„ìš” (beforeunload)
   - **ì¶”ê°€**: ë¸Œë¼ìš°ì € ë‹«ê¸°/ìƒˆë¡œê³ ì¹¨ ì‹œì—ë„ í™•ì¸

4. **ë¡œì»¬ íŒŒì¼ê³¼ ì„œë²„ íŒŒì¼ êµ¬ë¶„**
   - ë¡œì»¬ íŒŒì¼ì€ ì„œë²„ì— ì—…ë¡œë“œí•˜ì§€ ì•ŠìŒ
   - **ëª…í™•í™”**: UIì—ì„œ ë¡œì»¬ íŒŒì¼ì„ì„ í‘œì‹œ

#### ğŸ” Redis ì‚¬ìš©ì— ëŒ€í•œ ëª…í™•í•œ ë‹µë³€

**âŒ RedisëŠ” ìë™ ì €ì¥ì— ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

**ì´ìœ :**
1. **ìë™ ì €ì¥ì€ ì‚¬ìš©ìë³„ ë¡œì»¬ ìƒíƒœ**
   - ê° ì‚¬ìš©ìì˜ í¸ì§‘ ë‚´ìš©ì€ ë…ë¦½ì 
   - ë¸Œë¼ìš°ì €ë³„ë¡œ ë‹¤ë¥¸ ìƒíƒœ
   - RedisëŠ” ê³µìœ  ìƒíƒœ ê´€ë¦¬ìš©

2. **localStorageê°€ ë” ì í•©**
   - ì¦‰ì‹œ ì €ì¥ ê°€ëŠ¥ (ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì—†ìŒ)
   - ì˜¤í”„ë¼ì¸ ì§€ì›
   - ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ API

3. **Redisì˜ ì˜¬ë°”ë¥¸ ì‚¬ìš©ì²˜**
   - âœ… ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ê²°ê³¼ ìºì‹±
   - âœ… íŒŒì¼ ë©”íƒ€ë°ì´í„° ìºì‹±
   - âœ… ì„¸ì…˜ ê´€ë¦¬ (ì„ íƒì , JWT ì‚¬ìš© ì‹œ ë¶ˆí•„ìš”)
   - âœ… ë¶„ì‚° í™˜ê²½ì—ì„œ ê³µìœ  ìºì‹œ

**ìë™ ì €ì¥ ì•„í‚¤í…ì²˜:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ìë™ ì €ì¥ êµ¬ì¡°                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  [í¸ì§‘ ì¤‘ ë³€ê²½ì‚¬í•­]                      â”‚
â”‚           â”‚                             â”‚
â”‚           â–¼                             â”‚
â”‚  [localStorage ì¦‰ì‹œ ì €ì¥]                â”‚
â”‚  - í‚¤: "draft_{filePath}"               â”‚
â”‚  - ê°’: { content, timestamp, synced }   â”‚
â”‚           â”‚                             â”‚
â”‚           â”‚ (3ë¶„ë§ˆë‹¤ ë˜ëŠ” ë³€ê²½ ëˆ„ì )     â”‚
â”‚           â–¼                             â”‚
â”‚  [ì„œë²„ì— ì €ì¥]                           â”‚
â”‚  POST /api/files/{path}                 â”‚
â”‚           â”‚                             â”‚
â”‚           â–¼                             â”‚
â”‚  [localStorage ì—…ë°ì´íŠ¸]                 â”‚
â”‚  - synced: true                         â”‚
â”‚  - lastSynced: timestamp                 â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Redis ì‚¬ìš©ì²˜                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  [ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ê²°ê³¼ ìºì‹±]             â”‚
â”‚  í‚¤: "render:{userId}:{filePath}:{hash}"â”‚
â”‚  ê°’: HTML ë Œë”ë§ ê²°ê³¼                   â”‚
â”‚  TTL: 1ì‹œê°„                             â”‚
â”‚                                         â”‚
â”‚  [íŒŒì¼ ë©”íƒ€ë°ì´í„° ìºì‹±]                  â”‚
â”‚  í‚¤: "meta:{userId}:{filePath}"         â”‚
â”‚  ê°’: { size, modified, ... }           â”‚
â”‚  TTL: 30ë¶„                              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“‹ ì¶”ê°€ ê³ ë ¤ì‚¬í•­

1. **ì˜¤í”„ë¼ì¸ ì§€ì›**
   - Service Workerë¡œ ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì§€ì›
   - ì˜¤í”„ë¼ì¸ì—ì„œ í¸ì§‘í•œ ë‚´ìš©ì€ ì˜¨ë¼ì¸ ì‹œ ìë™ ë™ê¸°í™”

2. **ì¶©ëŒ í•´ê²°**
   - ì—¬ëŸ¬ íƒ­ì—ì„œ ê°™ì€ íŒŒì¼ í¸ì§‘ ì‹œ
   - ë§ˆì§€ë§‰ ì €ì¥ ìš°ì„  ë˜ëŠ” ì‚¬ìš©ìì—ê²Œ ì„ íƒê¶Œ ì œê³µ

3. **ì €ì¥ ìƒíƒœ í‘œì‹œ**
   - "ì €ì¥ë¨" / "ì €ì¥ ì¤‘..." / "ì €ì¥ ì‹¤íŒ¨" / "ì €ì¥ ì•ˆ ë¨"
   - ì‹œê°ì  ì¸ë””ì¼€ì´í„° (ìƒ‰ìƒ, ì•„ì´ì½˜)

4. **ì„±ëŠ¥ ìµœì í™”**
   - í° íŒŒì¼ì˜ ê²½ìš° ë¸íƒ€ ì €ì¥ (ë³€ê²½ëœ ë¶€ë¶„ë§Œ)
   - ì••ì¶• ì €ì¥ (gzip)

---

## ê¸°ìˆ  ìŠ¤íƒ êµ¬ì„±

### í”„ë¡ íŠ¸ì—”ë“œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Frontend Technology Stack     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ HTML5                               â”‚
â”‚ CSS3 (Variables, Grid, Flexbox)    â”‚
â”‚ TypeScript 5.2+ (í•„ìˆ˜)             â”‚
â”‚                                     â”‚
â”‚ Build Tool:                         â”‚
â”‚ - Vite 5.0+                        â”‚
â”‚                                     â”‚
â”‚ Architecture:                       â”‚
â”‚ - Feature-Sliced Design (FSD)      â”‚
â”‚                                     â”‚
â”‚ Web APIs:                           â”‚
â”‚ - Page Visibility API               â”‚
â”‚   (ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ ë°©ì§€)         â”‚
â”‚ - Web Crypto API (ì•”í˜¸í™”)           â”‚
â”‚ - File System Access API (ì„ íƒì )   â”‚
â”‚                                     â”‚
â”‚ Libraries:                          â”‚
â”‚ - Highlight.js (Code Highlighting)  â”‚
â”‚ - Font Awesome (Icons)             â”‚
â”‚                                     â”‚
â”‚ External Services:                  â”‚
â”‚ - Google OAuth 2.0 (Login)         â”‚
â”‚ - Google AdSense                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°±ì—”ë“œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Backend Technology Stack       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Framework:                          â”‚
â”‚ - Spring Boot 3.x                   â”‚
â”‚ - Spring Web MVC                    â”‚
â”‚ - Spring Security                   â”‚
â”‚ - Spring OAuth2 Client              â”‚
â”‚ - Spring Cache                      â”‚
â”‚                                     â”‚
â”‚ Authentication & Authorization:     â”‚
â”‚ - JWT (JSON Web Token)              â”‚
â”‚ - Spring Security JWT               â”‚
â”‚ - Google OAuth2 Client              â”‚
â”‚                                     â”‚
â”‚ Markdown Processing:                â”‚
â”‚ - Flexmark-java                     â”‚
â”‚ - CommonMark                        â”‚
â”‚                                     â”‚
â”‚ Caching:                            â”‚
â”‚ - Spring Cache Abstraction          â”‚
â”‚ - Redis (for scaling)               â”‚
â”‚                                     â”‚
â”‚ Database:                           â”‚
â”‚ - SQLite (ì´ˆê¸°, ë‹¨ì¼ ì‚¬ìš©ì)        â”‚
â”‚ - PostgreSQL (í™•ì¥ ì‹œ)              â”‚
â”‚ - Spring Data JPA                   â”‚
â”‚                                     â”‚
â”‚ Build Tool:                         â”‚
â”‚ - Maven or Gradle                   â”‚
â”‚                                     â”‚
â”‚ Server:                             â”‚
â”‚ - Embedded Tomcat                   â”‚
â”‚ - Nginx (Reverse Proxy)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì¸í”„ë¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Infrastructure Stack           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Storage:                            â”‚
â”‚ - NAS File System (NFS/SMB)        â”‚
â”‚                                     â”‚
â”‚ Cache:                              â”‚
â”‚ - Redis (Optional, for scaling)    â”‚
â”‚                                     â”‚
â”‚ Web Server:                         â”‚
â”‚ - Nginx (Reverse Proxy, SSL)       â”‚
â”‚                                     â”‚
â”‚ Container:                          â”‚
â”‚ - Docker                            â”‚
â”‚ - Docker Compose                    â”‚
â”‚                                     â”‚
â”‚ Monitoring:                         â”‚
â”‚ - Spring Boot Actuator              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## íŒŒì¼ ë³´ì•ˆ ë° ì•”í˜¸í™”

### ê°œìš”
ê°œì¸ì ì´ê³  ì¤‘ìš”í•œ íŒŒì¼ì´ ì„œë²„ì— ì €ì¥ë  ë•Œì˜ ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•œ ì•”í˜¸í™” ì „ëµì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ìì‹ ì˜ íŒŒì¼ì„ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥í•˜ê±°ë‚˜, ì„œë²„ì— ì €ì¥í•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œë§Œ ì‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë³´ì•ˆ ìš”êµ¬ì‚¬í•­

1. **ê°œì¸ íŒŒì¼ ë³´í˜¸**: ì¤‘ìš”í•œ ê°œì¸ íŒŒì¼ì€ ì„œë²„ ê´€ë¦¬ìë„ ì½ì„ ìˆ˜ ì—†ì–´ì•¼ í•¨
2. **ì‚¬ìš©ì ì œì–´**: ì‚¬ìš©ìê°€ ì•”í˜¸í™” ì—¬ë¶€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆì–´ì•¼ í•¨
3. **ë¡œì»¬ ì „ìš© ì˜µì…˜**: ì„œë²„ì— ì €ì¥í•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œë§Œ ì‘ì—… ê°€ëŠ¥
4. **ì•ˆì „í•œ ì‚­ì œ**: íŒŒì¼ ì‚­ì œ ì‹œ ì„œë²„ì—ì„œ ì™„ì „íˆ ì œê±°

### ì•”í˜¸í™” ì „ëµ

#### 1. í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì•”í˜¸í™” (ê¶Œì¥)

**ì›ì¹™:**
- íŒŒì¼ì€ **ë¸Œë¼ìš°ì €ì—ì„œ ì•”í˜¸í™”**ë˜ì–´ ì„œë²„ë¡œ ì „ì†¡
- ì•”í˜¸í™” í‚¤ëŠ” **ì‚¬ìš©ìë§Œ ì•Œê³  ìˆìŒ** (ì„œë²„ëŠ” í‚¤ë¥¼ ëª¨ë¦„)
- ì„œë²„ëŠ” ì•”í˜¸í™”ëœ ë°ì´í„°ë§Œ ì €ì¥ (í‰ë¬¸ì„ ë³¼ ìˆ˜ ì—†ìŒ)

**êµ¬í˜„ ë°©ë²•:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì•”í˜¸í™” íë¦„             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  [ì‚¬ìš©ìê°€ íŒŒì¼ ì €ì¥]                                â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  [ì•”í˜¸í™” í‚¤ ìƒì„±/ì…ë ¥]                               â”‚
â”‚  - ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ (PBKDF2)                    â”‚
â”‚  - ë˜ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥                          â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  [AES-256-GCM ì•”í˜¸í™”]                               â”‚
â”‚  - íŒŒì¼ ë‚´ìš© ì•”í˜¸í™”                                  â”‚
â”‚  - IV (Initialization Vector) ìƒì„±                  â”‚
â”‚  - ì¸ì¦ íƒœê·¸ ìƒì„± (ë¬´ê²°ì„± ê²€ì¦)                     â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  [ì•”í˜¸í™”ëœ ë°ì´í„° ì „ì†¡]                              â”‚
â”‚  POST /api/files/{path}                             â”‚
â”‚  Body: {                                             â”‚
â”‚    encrypted: true,                                 â”‚
â”‚    data: "<encrypted_base64>",                      â”‚
â”‚    iv: "<iv_base64>",                               â”‚
â”‚    tag: "<auth_tag_base64>"                         â”‚
â”‚  }                                                   â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  [ì„œë²„ ì €ì¥]                                        â”‚
â”‚  - ì•”í˜¸í™”ëœ ë°ì´í„°ë§Œ ì €ì¥                           â”‚
â”‚  - í‚¤ëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ                               â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  [íŒŒì¼ ì½ê¸° ì‹œ]                                     â”‚
â”‚  - ì„œë²„ì—ì„œ ì•”í˜¸í™”ëœ ë°ì´í„° ë°˜í™˜                    â”‚
â”‚  - ë¸Œë¼ìš°ì €ì—ì„œ ë³µí˜¸í™”                              â”‚
â”‚  - ì‚¬ìš©ìì—ê²Œ í‰ë¬¸ í‘œì‹œ                             â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì•”í˜¸í™” í‚¤ ê´€ë¦¬:**

1. **ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ í‚¤ íŒŒìƒ (PBKDF2)**
   ```javascript
   // ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¡œë¶€í„° ì•”í˜¸í™” í‚¤ ìƒì„±
   const password = userInputPassword; // ì‚¬ìš©ì ì…ë ¥
   const salt = generateSalt(); // ëœë¤ ì†”íŠ¸ ìƒì„±
   const key = await crypto.subtle.deriveKey(
     {
       name: "PBKDF2",
       salt: salt,
       iterations: 100000,
       hash: "SHA-256"
     },
     passwordKey,
     { name: "AES-GCM", length: 256 },
     false,
     ["encrypt", "decrypt"]
   );
   ```

2. **í‚¤ ì €ì¥ ìœ„ì¹˜**
   - âŒ ì„œë²„ì— ì €ì¥í•˜ì§€ ì•ŠìŒ
   - âœ… ë¸Œë¼ìš°ì € localStorage (ì•”í˜¸í™”ëœ í˜•íƒœ)
   - âœ… ì‚¬ìš©ì ë©”ëª¨ë¦¬ì—ë§Œ ë³´ê´€ (ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì‚­ì œ)

#### 2. íŒŒì¼ ì €ì¥ ëª¨ë“œ ì„ íƒ

**ëª¨ë“œ 1: ì¼ë°˜ ì €ì¥ (ì•”í˜¸í™” ì—†ìŒ)**
- ì„œë²„ì— í‰ë¬¸ìœ¼ë¡œ ì €ì¥
- ë¹ ë¥¸ ì ‘ê·¼, ê°„ë‹¨í•œ íŒŒì¼ì— ì í•©
- ì„œë²„ ê´€ë¦¬ìê°€ ì½ì„ ìˆ˜ ìˆìŒ

**ëª¨ë“œ 2: ì•”í˜¸í™” ì €ì¥**
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì•”í˜¸í™” í›„ ì €ì¥
- ì¤‘ìš”í•œ ê°œì¸ íŒŒì¼ì— ì í•©
- ì„œë²„ ê´€ë¦¬ìë„ ì½ì„ ìˆ˜ ì—†ìŒ

**ëª¨ë“œ 3: ë¡œì»¬ ì „ìš© (ì„œë²„ ì €ì¥ ì•ˆ í•¨)**
- ì„œë²„ì— ì €ì¥í•˜ì§€ ì•ŠìŒ
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì—ë§Œ ì €ì¥
- ì™„ì „í•œ í”„ë¼ì´ë²„ì‹œ ë³´ì¥

#### 3. ì•”í˜¸í™” êµ¬í˜„ ìƒì„¸

**í”„ë¡ íŠ¸ì—”ë“œ ì•”í˜¸í™” ì»´í¬ë„ŒíŠ¸:**

```javascript
class FileEncryption {
  constructor() {
    this.algorithm = { name: "AES-GCM", length: 256 };
  }
  
  async encryptFile(content, password) {
    // 1. í‚¤ íŒŒìƒ
    const key = await this.deriveKey(password);
    
    // 2. IV ìƒì„±
    const iv = crypto.getRandomValues(new Uint8Array(12));
    
    // 3. ì•”í˜¸í™”
    const encodedContent = new TextEncoder().encode(content);
    const encryptedData = await crypto.subtle.encrypt(
      {
        name: "AES-GCM",
        iv: iv
      },
      key,
      encodedContent
    );
    
    // 4. Base64 ì¸ì½”ë”©
    return {
      encrypted: btoa(String.fromCharCode(...new Uint8Array(encryptedData))),
      iv: btoa(String.fromCharCode(...iv)),
      tag: btoa(String.fromCharCode(...new Uint8Array(encryptedData.slice(-16))))
    };
  }
  
  async decryptFile(encryptedData, password) {
    // 1. í‚¤ íŒŒìƒ
    const key = await this.deriveKey(password);
    
    // 2. Base64 ë””ì½”ë”©
    const encrypted = Uint8Array.from(atob(encryptedData.encrypted), c => c.charCodeAt(0));
    const iv = Uint8Array.from(atob(encryptedData.iv), c => c.charCodeAt(0));
    
    // 3. ë³µí˜¸í™”
    const decrypted = await crypto.subtle.decrypt(
      {
        name: "AES-GCM",
        iv: iv
      },
      key,
      encrypted
    );
    
    // 4. í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
    return new TextDecoder().decode(decrypted);
  }
  
  async deriveKey(password) {
    const encoder = new TextEncoder();
    const passwordKey = await crypto.subtle.importKey(
      "raw",
      encoder.encode(password),
      "PBKDF2",
      false,
      ["deriveKey"]
    );
    
    const salt = this.getSalt(); // ì‚¬ìš©ìë³„ ê³ ìœ  ì†”íŠ¸
    
    return await crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt,
        iterations: 100000,
        hash: "SHA-256"
      },
      passwordKey,
      this.algorithm,
      false,
      ["encrypt", "decrypt"]
    );
  }
}
```

**ë°±ì—”ë“œ ì €ì¥ êµ¬ì¡°:**

```java
@Entity
public class FileMetadata {
    @Id
    private Long id;
    
    private String userId;
    private String filePath;
    private boolean encrypted;  // ì•”í˜¸í™” ì—¬ë¶€
    private String iv;          // IV (Base64)
    private String authTag;     // ì¸ì¦ íƒœê·¸ (Base64)
    private byte[] encryptedContent; // ì•”í˜¸í™”ëœ íŒŒì¼ ë‚´ìš©
    private Long fileSize;
    private LocalDateTime lastModified;
    
    // ì•”í˜¸í™”ëœ íŒŒì¼ì€ í‰ë¬¸ì„ ì €ì¥í•˜ì§€ ì•ŠìŒ
    // encryptedContentë§Œ ì €ì¥
}
```

#### 4. íŒŒì¼ ì‚­ì œ ì „ëµ

**ì¼ë°˜ ì‚­ì œ:**
- íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì‚­ì œ
- ë©”íƒ€ë°ì´í„°ì—ì„œ ì œê±°
- âš ï¸ ë””ìŠ¤í¬ì— ë°ì´í„°ê°€ ë‚¨ì„ ìˆ˜ ìˆìŒ

**ì•ˆì „ ì‚­ì œ (Secure Delete):**
- íŒŒì¼ì„ ì‚­ì œí•˜ê¸° ì „ì— ëœë¤ ë°ì´í„°ë¡œ ë®ì–´ì“°ê¸°
- ì—¬ëŸ¬ ë²ˆ ë®ì–´ì“°ê¸° (DoD 5220.22-M í‘œì¤€)
- ì•”í˜¸í™”ëœ íŒŒì¼ì˜ ê²½ìš° í‚¤ë„ í•¨ê»˜ ì‚­ì œ

**êµ¬í˜„:**

```java
public void secureDelete(String filePath) {
    File file = new File(filePath);
    
    if (file.exists()) {
        // 1. íŒŒì¼ í¬ê¸° í™•ì¸
        long length = file.length();
        
        // 2. ëœë¤ ë°ì´í„°ë¡œ ë®ì–´ì“°ê¸° (3íšŒ)
        RandomAccessFile raf = new RandomAccessFile(file, "rws");
        byte[] randomData = new byte[(int) length];
        
        for (int i = 0; i < 3; i++) {
            new SecureRandom().nextBytes(randomData);
            raf.seek(0);
            raf.write(randomData);
            raf.getFD().sync();
        }
        
        raf.close();
        
        // 3. íŒŒì¼ ì‚­ì œ
        file.delete();
    }
}
```

#### 5. UI/UX - ì•”í˜¸í™” ì˜µì…˜

**íŒŒì¼ ì €ì¥ ì‹œ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      íŒŒì¼ ì €ì¥ ì˜µì…˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ì €ì¥ ëª¨ë“œ ì„ íƒ:                    â”‚
â”‚  â—‹ ì¼ë°˜ ì €ì¥ (ì•”í˜¸í™” ì—†ìŒ)          â”‚
â”‚  â— ì•”í˜¸í™” ì €ì¥                      â”‚
â”‚  â—‹ ë¡œì»¬ ì „ìš© (ì„œë²„ ì €ì¥ ì•ˆ í•¨)      â”‚
â”‚                                     â”‚
â”‚  [ì•”í˜¸í™” ì €ì¥ ì„ íƒ ì‹œ]               â”‚
â”‚  ë¹„ë°€ë²ˆí˜¸: [___________]            â”‚
â”‚  ë¹„ë°€ë²ˆí˜¸ í™•ì¸: [___________]       â”‚
â”‚  â˜‘ ë¹„ë°€ë²ˆí˜¸ ì €ì¥ (ë¡œì»¬ì—ë§Œ)         â”‚
â”‚                                     â”‚
â”‚  [ì €ì¥] [ì·¨ì†Œ]                      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì¼ ì½ê¸° ì‹œ:**

```
[ì•”í˜¸í™”ëœ íŒŒì¼ ì—´ê¸°]
  â”‚
  â–¼
[ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ìš”ì²­]
  â”‚
  â”œâ”€ [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥] â”€â”€â–º [ë³µí˜¸í™” ë° í‘œì‹œ]
  â”‚
  â””â”€ [ì·¨ì†Œ] â”€â”€â–º [íŒŒì¼ ì—´ê¸° ì·¨ì†Œ]
```

### ë°ì´í„° íë¦„ë„ - ì•”í˜¸í™” ì €ì¥

```
[User: Save File with Encryption]
  â”‚
  â”‚ 1. ì‚¬ìš©ìê°€ "ì•”í˜¸í™” ì €ì¥" ì„ íƒ
  â”‚
  â–¼
[Frontend: Encryption Component]
  â”‚
  â”‚ 2. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ìš”ì²­
  â”‚
  â”‚ 3. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
  â”‚
  â”‚ 4. PBKDF2ë¡œ ì•”í˜¸í™” í‚¤ íŒŒìƒ
  â”‚    - Salt: ì‚¬ìš©ìë³„ ê³ ìœ  ì†”íŠ¸
  â”‚    - Iterations: 100,000
  â”‚
  â”‚ 5. AES-256-GCM ì•”í˜¸í™”
  â”‚    - IV ìƒì„± (12 bytes)
  â”‚    - íŒŒì¼ ë‚´ìš© ì•”í˜¸í™”
  â”‚    - ì¸ì¦ íƒœê·¸ ìƒì„±
  â”‚
  â”‚ 6. Base64 ì¸ì½”ë”©
  â”‚
  â”‚ 7. HTTP POST /api/files/{path}
  â”‚    Body: {
  â”‚      encrypted: true,
  â”‚      data: "<encrypted_base64>",
  â”‚      iv: "<iv_base64>",
  â”‚      tag: "<auth_tag_base64>"
  â”‚    }
  â”‚
  â–¼
[Backend: FileController]
  â”‚
  â”‚ 8. ì•”í˜¸í™”ëœ ë°ì´í„° ê²€ì¦
  â”‚
  â”‚ 9. FileService.saveEncryptedFile()
  â”‚
  â–¼
[FileService]
  â”‚
  â”‚ 10. ì•”í˜¸í™”ëœ ë°ì´í„° ì €ì¥
  â”‚     - í‰ë¬¸ ì €ì¥í•˜ì§€ ì•ŠìŒ
  â”‚     - IV, Tagì™€ í•¨ê»˜ ì €ì¥
  â”‚
  â”‚ 11. FileMetadata ì—…ë°ì´íŠ¸
  â”‚     encrypted = true
  â”‚
  â–¼
[FileRepository]
  â”‚
  â”‚ 12. NASì— ì•”í˜¸í™”ëœ íŒŒì¼ ì €ì¥
  â”‚     /users/{userId}/files/{path}.encrypted
  â”‚
  â–¼
[Success Response]
  â”‚
  â–¼
[Frontend: Show Success]
  â”‚
  â”‚ 13. ë¹„ë°€ë²ˆí˜¸ëŠ” localStorageì— ì €ì¥í•˜ì§€ ì•ŠìŒ
  â”‚     (ë˜ëŠ” ì‚¬ìš©ì ì„ íƒ ì‹œ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥)
  â”‚
  â–¼
[User: File Saved Encrypted]
```

### ë°ì´í„° íë¦„ë„ - ì•”í˜¸í™” íŒŒì¼ ì½ê¸°

```
[User: Open Encrypted File]
  â”‚
  â”‚ 1. HTTP GET /api/files/{path}
  â”‚
  â–¼
[Backend: FileController]
  â”‚
  â”‚ 2. FileMetadata í™•ì¸
  â”‚    encrypted = true
  â”‚
  â”‚ 3. ì•”í˜¸í™”ëœ íŒŒì¼ ë‚´ìš© ë°˜í™˜
  â”‚    {
  â”‚      encrypted: true,
  â”‚      data: "<encrypted_base64>",
  â”‚      iv: "<iv_base64>",
  â”‚      tag: "<auth_tag_base64>"
  â”‚    }
  â”‚
  â–¼
[Frontend: Encryption Component]
  â”‚
  â”‚ 4. ì•”í˜¸í™”ëœ íŒŒì¼ ê°ì§€
  â”‚
  â”‚ 5. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ìš”ì²­
  â”‚    (localStorageì— ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸ í™•ì¸)
  â”‚
  â”œâ”€ [ë¹„ë°€ë²ˆí˜¸ ìˆìŒ] â”€â”€â–º [ìë™ ë³µí˜¸í™” ì‹œë„]
  â”‚
  â””â”€ [ë¹„ë°€ë²ˆí˜¸ ì—†ìŒ] â”€â”€â–º [ì‚¬ìš©ì ì…ë ¥ ìš”ì²­]
                          â”‚
                          â”‚ 6. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
                          â”‚
                          â”‚ 7. PBKDF2ë¡œ í‚¤ íŒŒìƒ
                          â”‚
                          â”‚ 8. AES-256-GCM ë³µí˜¸í™”
                          â”‚
                          â”‚ 9. ì¸ì¦ íƒœê·¸ ê²€ì¦
                          â”‚
                          â”œâ”€ [ê²€ì¦ ì„±ê³µ] â”€â”€â–º [í‰ë¬¸ í‘œì‹œ]
                          â”‚
                          â””â”€ [ê²€ì¦ ì‹¤íŒ¨] â”€â”€â–º [ì—ëŸ¬: ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸]
```

### ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€

#### 1. í‚¤ ê´€ë¦¬
- âœ… ì•”í˜¸í™” í‚¤ëŠ” ì„œë²„ì— ì €ì¥í•˜ì§€ ì•ŠìŒ
- âœ… ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ëŠ” PBKDF2ë¡œ í‚¤ íŒŒìƒ (100,000+ iterations)
- âœ… ê° íŒŒì¼ë§ˆë‹¤ ê³ ìœ í•œ IV ì‚¬ìš©
- âœ… ì¸ì¦ íƒœê·¸ë¡œ ë¬´ê²°ì„± ê²€ì¦

#### 2. ì „ì†¡ ë³´ì•ˆ
- âœ… HTTPS í•„ìˆ˜ (TLS 1.2+)
- âœ… ì•”í˜¸í™”ëœ ë°ì´í„°ë„ HTTPSë¡œ ì „ì†¡
- âœ… JWT í† í°ìœ¼ë¡œ ì¸ì¦

#### 3. ì €ì¥ ë³´ì•ˆ
- âœ… ì•”í˜¸í™”ëœ íŒŒì¼ì€ í‰ë¬¸ê³¼ êµ¬ë¶„í•˜ì—¬ ì €ì¥
- âœ… íŒŒì¼ ì‹œìŠ¤í…œ ê¶Œí•œ ì„¤ì • (chmod 600)
- âœ… ë°±ì—…ë„ ì•”í˜¸í™”ëœ ìƒíƒœë¡œ ì €ì¥

#### 4. ì‚¬ìš©ì ê²½í—˜
- âœ… ì•”í˜¸í™” ì—¬ë¶€ë¥¼ UIì— ëª…í™•íˆ í‘œì‹œ
- âœ… ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì‹œ ë³´ì•ˆ ì•ˆë‚´
- âœ… ë¹„ë°€ë²ˆí˜¸ ë¶„ì‹¤ ì‹œ ë³µêµ¬ ë¶ˆê°€ ì•ˆë‚´

### ë¡œì»¬ ì „ìš© ëª¨ë“œ

**íŠ¹ì§•:**
- ì„œë²„ì— íŒŒì¼ì„ ì €ì¥í•˜ì§€ ì•ŠìŒ
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì—ë§Œ ì €ì¥
- File System Access API ë˜ëŠ” ë‹¤ìš´ë¡œë“œ ì‚¬ìš©

**ì‚¬ìš© ì‚¬ë¡€:**
- ë§¤ìš° ì¤‘ìš”í•œ ê°œì¸ íŒŒì¼
- ì„œë²„ ì €ì¥ì„ ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼
- ì˜¤í”„ë¼ì¸ ì‘ì—…

**êµ¬í˜„:**
- íŒŒì¼ ì €ì¥ ì‹œ "ë¡œì»¬ ì „ìš©" ì˜µì…˜ ì„ íƒ
- ì„œë²„ API í˜¸ì¶œ ì—†ì´ ë¡œì»¬ì—ë§Œ ì €ì¥
- File System Access API ë˜ëŠ” Blob ë‹¤ìš´ë¡œë“œ

### ì•”í˜¸í™” ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

1. **ì•”í˜¸í™” ì˜¤ë²„í—¤ë“œ**
   - AES-256-GCM: ë¹ ë¥¸ ì•”í˜¸í™”/ë³µí˜¸í™”
   - PBKDF2: í‚¤ íŒŒìƒì— ì‹œê°„ ì†Œìš” (ì˜ë„ì )
   - í° íŒŒì¼ì˜ ê²½ìš° ìŠ¤íŠ¸ë¦¬ë° ì•”í˜¸í™” ê³ ë ¤

2. **ìºì‹± ì „ëµ**
   - ë³µí˜¸í™”ëœ ë‚´ìš©ì€ ë©”ëª¨ë¦¬ì—ë§Œ ë³´ê´€
   - localStorageì—ëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ
   - ì„¸ì…˜ ì¢…ë£Œ ì‹œ ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œ

3. **ë³‘ë ¬ ì²˜ë¦¬**
   - ì—¬ëŸ¬ íŒŒì¼ ì•”í˜¸í™” ì‹œ Web Workers í™œìš©
   - UI ë¸”ë¡œí‚¹ ë°©ì§€

### ê¸°ìˆ  ìŠ¤íƒ ì¶”ê°€

**í”„ë¡ íŠ¸ì—”ë“œ:**
- Web Crypto API (ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ)
- SubtleCrypto API
- PBKDF2, AES-GCM ì§€ì›

**ë°±ì—”ë“œ:**
- ì•”í˜¸í™”ëœ ë°ì´í„° ì €ì¥ë§Œ ë‹´ë‹¹
- ë³µí˜¸í™” ë¡œì§ ì—†ìŒ (í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ)
- íŒŒì¼ ë©”íƒ€ë°ì´í„° ê´€ë¦¬

---

## ë°°í¬ êµ¬ì¡°

### Phase 1: NAS ë°°í¬ (ì´ˆê¸°)

```
                    Internet
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Router/Gatewayâ”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Port Forward  â”‚
              â”‚   (80, 443)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         Home NAS             â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   Docker Container     â”‚  â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
        â”‚  â”‚  â”‚   Nginx          â”‚  â”‚  â”‚
        â”‚  â”‚  â”‚  (Reverse Proxy) â”‚  â”‚  â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
        â”‚  â”‚           â”‚            â”‚  â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
        â”‚  â”‚  â”‚  Spring Boot App â”‚  â”‚  â”‚
        â”‚  â”‚  â”‚  (Tomcat)        â”‚  â”‚  â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚              â”‚                â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   NAS File System      â”‚  â”‚
        â”‚  â”‚   (/markdown-files)    â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: í´ë¼ìš°ë“œ ì „í™˜ (í™•ì¥ ì‹œ)

```
                    Internet
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Cloud Load    â”‚
              â”‚   Balancer      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
        â–¼              â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Nginx  â”‚   â”‚  Nginx  â”‚   â”‚  Nginx  â”‚
   â”‚ Instanceâ”‚   â”‚ Instanceâ”‚   â”‚ Instanceâ”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Spring  â”‚   â”‚ Spring  â”‚   â”‚ Spring  â”‚
   â”‚ Boot    â”‚   â”‚ Boot    â”‚   â”‚ Boot    â”‚
   â”‚ App 1   â”‚   â”‚ App 2   â”‚   â”‚ App 3   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Redis Cluster        â”‚
        â”‚    (Shared Cache)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Cloud Storage (NFS)     â”‚
        â”‚   or Object Storage        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í™•ì¥ì„± ì „ëµ

### ì‚¬ìš©ì ê·œëª¨ë³„ ì•„í‚¤í…ì²˜

#### 1. ì´ˆê¸° ë‹¨ê³„ (100-500ëª…/ì¼)
```
- ë‹¨ì¼ Spring Boot ì¸ìŠ¤í„´ìŠ¤
- ë‚´ì¥ Tomcat
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ (NAS)
- ì¸ë©”ëª¨ë¦¬ ìºì‹œ (Caffeine)
- Nginx (ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤)
```

#### 2. ì„±ì¥ ë‹¨ê³„ (1000ëª…/ì¼)
```
- Spring Boot ì¸ìŠ¤í„´ìŠ¤ 2-3ê°œ
- Nginx ë¡œë“œ ë°¸ëŸ°ì‹±
- Redis ìºì‹œ (ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤)
- NAS íŒŒì¼ ì‹œìŠ¤í…œ (NFS)
- ëª¨ë‹ˆí„°ë§ (Spring Boot Actuator)
```

#### 3. í™•ì¥ ë‹¨ê³„ (5000ëª…/ì¼) - Kubernetes ê¸°ë°˜
```
- Kubernetes í´ëŸ¬ìŠ¤í„°
  - Spring Boot Pods (5-10ê°œ, HPA ì ìš©)
  - Nginx Ingress Controller
  - Redis Cluster (StatefulSet)
- ë©”ì‹œì§€ í: RabbitMQ ë˜ëŠ” Kafka
  - íŒŒì¼ ì—…ë¡œë“œ ë¹„ë™ê¸° ì²˜ë¦¬
  - ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ì‘ì—… í
  - ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°
- ìºì‹± ì „ëµ (ë‹¤ì¸µ ìºì‹±)
  - L1: ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ë©”ëª¨ë¦¬ ìºì‹œ (Caffeine)
  - L2: Redis í´ëŸ¬ìŠ¤í„° (ë¶„ì‚° ìºì‹œ)
  - L3: CDN (ì •ì  íŒŒì¼, ë Œë”ë§ëœ HTML)
- í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ (NFS/Object Storage)
- ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ì„±
  - Prometheus + Grafana (ë©”íŠ¸ë¦­)
  - ELK Stack (ë¡œê¹…)
  - Jaeger ë˜ëŠ” Zipkin (ë¶„ì‚° íŠ¸ë ˆì´ì‹±)
```

### ì„±ëŠ¥ ìµœì í™” ì „ëµ

#### 1. ë‹¤ì¸µ ìºì‹± ì „ëµ (Multi-Layer Caching)

**L1 ìºì‹œ (ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨)**
- Caffeine ì¸ë©”ëª¨ë¦¬ ìºì‹œ
- ìì£¼ ì ‘ê·¼í•˜ëŠ” íŒŒì¼ ë©”íƒ€ë°ì´í„°
- ì‚¬ìš©ì ì„¸ì…˜ ì •ë³´
- TTL: 5ë¶„, ìµœëŒ€ í¬ê¸°: 1000ê°œ

**L2 ìºì‹œ (ë¶„ì‚° ìºì‹œ)**
- Redis í´ëŸ¬ìŠ¤í„°
- ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ê²°ê³¼ (TTL: 1ì‹œê°„)
- íŒŒì¼ ë©”íƒ€ë°ì´í„° (TTL: 30ë¶„)
- ì‚¬ìš©ìë³„ ë§ˆì§€ë§‰ ë¬¸ì„œ ì •ë³´ (TTL: 24ì‹œê°„)
- ìºì‹œ ë¬´íš¨í™” ì „ëµ: Write-Through, Write-Behind

**L3 ìºì‹œ (CDN)**
- ì •ì  íŒŒì¼ (CSS, JS, ì´ë¯¸ì§€)
- ë Œë”ë§ëœ HTML (ì„ íƒì )
- ìºì‹œ í—¤ë” ìµœì í™” (Cache-Control, ETag)

**ìºì‹± ì „ëµ ì„ íƒ ê°€ì´ë“œ**
- **Cache-Aside**: íŒŒì¼ ì½ê¸° (ê°€ì¥ ì¼ë°˜ì )
- **Write-Through**: íŒŒì¼ ì €ì¥ ì‹œ ìºì‹œì™€ DB ë™ì‹œ ì—…ë°ì´íŠ¸
- **Write-Behind**: ë¹„ë™ê¸°ë¡œ ìºì‹œ ì—…ë°ì´íŠ¸ (MQ í™œìš©)

#### 2. ë¹„ë™ê¸° ì²˜ë¦¬ ì „ëµ (MQ/Kafka)

**RabbitMQ ì‚¬ìš© ì‚¬ë¡€**
- íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ í
- ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ì‘ì—… í
- ì´ë©”ì¼ ì•Œë¦¼ (í–¥í›„ í™•ì¥)
- ë°°ì¹˜ ì‘ì—… (ë°±ì—…, ì •ë¦¬)

**Kafka ì‚¬ìš© ì‚¬ë¡€**
- íŒŒì¼ ë³€ê²½ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°
- ì‚¬ìš©ì í™œë™ ë¡œê·¸ ìˆ˜ì§‘
- ì‹¤ì‹œê°„ ë¶„ì„ (íŒŒì¼ ì ‘ê·¼ íŒ¨í„´)
- ì´ë²¤íŠ¸ ì†Œì‹± (ì„ íƒì )

**ë¹„ë™ê¸° ì²˜ë¦¬ íë¦„**
```
[ì‚¬ìš©ì ìš”ì²­]
  â”‚
  â–¼
[API Gateway]
  â”‚
  â”œâ”€ [ë™ê¸° ì²˜ë¦¬] â”€â”€â–º [ì¦‰ì‹œ ì‘ë‹µ]
  â”‚   - íŒŒì¼ ì½ê¸° (ìºì‹œ íˆíŠ¸)
  â”‚   - ê°„ë‹¨í•œ ë©”íƒ€ë°ì´í„° ì¡°íšŒ
  â”‚
  â””â”€ [ë¹„ë™ê¸° ì²˜ë¦¬] â”€â”€â–º [MQ/Kafka] â”€â”€â–º [ì›Œì»¤ í”„ë¡œì„¸ìŠ¤]
      - íŒŒì¼ ì—…ë¡œë“œ
      - ë§ˆí¬ë‹¤ìš´ ë Œë”ë§
      - íŒŒì¼ ì¸ë±ì‹±
```

#### 3. ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ëŒ€ì‘

**ë¡œë“œ ë°¸ëŸ°ì‹±**
- Kubernetes Service (ClusterIP, LoadBalancer)
- Nginx Ingress Controller
- ì„¸ì…˜ ì–´í”¼ë‹ˆí‹° (Sticky Session) ë˜ëŠ” Stateless ì„¤ê³„

**ì˜¤í† ìŠ¤ì¼€ì¼ë§**
- Horizontal Pod Autoscaler (HPA)
- ë©”íŠ¸ë¦­ ê¸°ë°˜: CPU, Memory, Request Rate
- ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­: í ê¸¸ì´, ì‘ë‹µ ì‹œê°„

**ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”**
- ì½ê¸° ì „ìš© ë³µì œë³¸ (Read Replica)
- ì»¤ë„¥ì…˜ í’€ë§
- ì¿¼ë¦¬ ìµœì í™” ë° ì¸ë±ì‹±
- í•„ìš”ì‹œ ìƒ¤ë”© (ì‚¬ìš©ì ID ê¸°ë°˜)

**íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ìµœì í™”**
- Object Storage (S3 í˜¸í™˜) í™œìš©
- CDN ì—°ë™
- íŒŒì¼ ì••ì¶• (gzip)
- ì ì§„ì  ë¡œë”© (Chunked Transfer)

#### 4. ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ì„±

**ë©”íŠ¸ë¦­ (Prometheus)**
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”íŠ¸ë¦­: ìš”ì²­ ìˆ˜, ì‘ë‹µ ì‹œê°„, ì—ëŸ¬ìœ¨
- ì¸í”„ë¼ ë©”íŠ¸ë¦­: CPU, Memory, Disk, Network
- ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­: í™œì„± ì‚¬ìš©ì, íŒŒì¼ ì €ì¥ ìˆ˜, ìºì‹œ íˆíŠ¸ìœ¨

**ë¡œê¹… (ELK Stack)**
- êµ¬ì¡°í™”ëœ ë¡œê¹… (JSON)
- ë¡œê·¸ ë ˆë²¨ ê´€ë¦¬
- ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ìˆ˜ì§‘

**íŠ¸ë ˆì´ì‹± (Jaeger/Zipkin)**
- ë¶„ì‚° íŠ¸ë ˆì´ì‹±
- ìš”ì²­ íë¦„ ì¶”ì 
- ë³‘ëª© ì§€ì  ì‹ë³„

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### íŒŒì¼ ì‹œìŠ¤í…œ ë³´ì•ˆ
- íŒŒì¼ ê²½ë¡œ ê²€ì¦ (Path Traversal ë°©ì§€)
- íŒŒì¼ í™•ì¥ì ê²€ì¦ (.md, .markdownë§Œ í—ˆìš©)
- íŒŒì¼ í¬ê¸° ì œí•œ (16MB)
- íŒŒì¼ëª… ìœ„í—˜ ë¬¸ì ì œê±°

### ì›¹ ë³´ì•ˆ
- HTTPS ê°•ì œ (SSL/TLS)
- CORS ì„¤ì •
- XSS ë°©ì§€ (ì…ë ¥ê°’ ê²€ì¦ ë° ì´ìŠ¤ì¼€ì´í”„)
- CSRF í† í° (í•„ìš”ì‹œ)

### ì¸í”„ë¼ ë³´ì•ˆ
- ë°©í™”ë²½ ê·œì¹™ ì„¤ì •
- í¬íŠ¸ ì œí•œ (80, 443ë§Œ ê°œë°©)
- ì •ê¸°ì ì¸ ë³´ì•ˆ ì—…ë°ì´íŠ¸

---

## ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ëª¨ë‹ˆí„°ë§ ì§€í‘œ
- ì‘ë‹µ ì‹œê°„ (Response Time)
- ì²˜ë¦¬ëŸ‰ (Throughput)
- ì—ëŸ¬ìœ¨ (Error Rate)
- ìºì‹œ íˆíŠ¸ìœ¨ (Cache Hit Rate)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- CPU ì‚¬ìš©ëŸ‰

### ë¡œê¹…
- Spring Boot Logging (Logback)
- ì•¡ì„¸ìŠ¤ ë¡œê·¸ (Nginx)
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ (íŒŒì¼/í´ë¼ìš°ë“œ)
- ì—ëŸ¬ ë¡œê·¸ ì§‘ì¤‘ ê´€ë¦¬

---

## ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ ë°©ì§€ ê¸°ëŠ¥

### ê°œìš”
ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì € íƒ­ì„ ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì „í™˜í•˜ê±°ë‚˜ ë¸Œë¼ìš°ì €ë¥¼ ìµœì†Œí™”í–ˆì„ ë•Œ, í˜ì´ì§€ê°€ ë°±ê·¸ë¼ìš´ë“œì— ìˆëŠ” ë™ì•ˆ ìë™ ìƒˆë¡œê³ ì¹¨ì´ë‚˜ íŒŒì¼ ë³€ê²½ ê°ì§€ë¥¼ ì¤‘ì§€í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ê³¼ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ì„ ë°©ì§€í•©ë‹ˆë‹¤.

### êµ¬í˜„ ë°©ë²•

#### 1. Page Visibility API í™œìš©
```javascript
// ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ API ì‚¬ìš©
document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    // íƒ­ì´ ìˆ¨ê²¨ì§ - ìë™ ì—…ë°ì´íŠ¸ ì¤‘ì§€
    stopFileChangeDetection();
  } else {
    // íƒ­ì´ ë‹¤ì‹œ ë³´ì„ - ìë™ ì—…ë°ì´íŠ¸ ì¬ê°œ
    resumeFileChangeDetection();
  }
});
```

#### 2. ë™ì‘ ì›ë¦¬

**íƒ­ì´ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œ (Visible)**
- 30ì´ˆë§ˆë‹¤ íŒŒì¼ ë³€ê²½ ê°ì§€ API í˜¸ì¶œ
- íŒŒì¼ì´ ë³€ê²½ë˜ì—ˆìœ¼ë©´ ìë™ìœ¼ë¡œ ì½˜í…ì¸  ìƒˆë¡œê³ ì¹¨
- ì‚¬ìš©ìê°€ ë³´ê³  ìˆëŠ” ì½˜í…ì¸ ê°€ ìµœì‹  ìƒíƒœ ìœ ì§€

**íƒ­ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œ (Hidden)**
- íŒŒì¼ ë³€ê²½ ê°ì§€ ì¸í„°ë²Œ ì¤‘ì§€
- ìë™ ìƒˆë¡œê³ ì¹¨ ì¤‘ì§€
- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì—†ìŒ (ë°°í„°ë¦¬ ë° ë¦¬ì†ŒìŠ¤ ì ˆì•½)

**íƒ­ì´ ë‹¤ì‹œ í™œì„±í™”ë  ë•Œ**
- í•œ ë²ˆë§Œ íŒŒì¼ ë³€ê²½ ì—¬ë¶€ í™•ì¸ (ì¡°ìš©í•œ ì²´í¬)
- ë³€ê²½ë˜ì—ˆìœ¼ë©´ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ë˜ëŠ” ìë™ ìƒˆë¡œê³ ì¹¨
- ì •ìƒì ì¸ íŒŒì¼ ë³€ê²½ ê°ì§€ ì¬ê°œ

#### 3. API ì—”ë“œí¬ì¸íŠ¸

**íŒŒì¼ ë³€ê²½ ê°ì§€ API**
```
GET /api/files/{path}/check
Headers:
  If-Modified-Since: <last-modified-timestamp>

Response:
  200 OK: íŒŒì¼ì´ ë³€ê²½ë¨
    Body: { modified: true, lastModified: <timestamp>, content: <html> }
  
  304 Not Modified: íŒŒì¼ì´ ë³€ê²½ë˜ì§€ ì•ŠìŒ
    Body: (empty)
```

#### 4. í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ì˜ˆì‹œ

```javascript
class VisibilityManager {
  constructor() {
    this.checkInterval = null;
    this.isVisible = !document.hidden;
    this.lastModified = null;
    this.currentFilePath = null;
    
    this.init();
  }
  
  init() {
    document.addEventListener('visibilitychange', () => {
      this.handleVisibilityChange();
    });
  }
  
  handleVisibilityChange() {
    if (document.hidden) {
      // íƒ­ì´ ìˆ¨ê²¨ì§
      this.stopChecking();
    } else {
      // íƒ­ì´ ë‹¤ì‹œ ë³´ì„
      this.resumeChecking();
    }
  }
  
  startChecking(filePath) {
    this.currentFilePath = filePath;
    if (!this.isVisible) return;
    
    this.checkInterval = setInterval(() => {
      this.checkFileChange(filePath);
    }, 30000); // 30ì´ˆë§ˆë‹¤ ì²´í¬
  }
  
  stopChecking() {
    if (this.checkInterval) {
      clearInterval(this.checkInterval);
      this.checkInterval = null;
    }
  }
  
  resumeChecking() {
    if (!this.currentFilePath) return;
    
    // í•œ ë²ˆë§Œ ì²´í¬ (ì¡°ìš©í•œ ì²´í¬)
    this.checkFileChange(this.currentFilePath, true);
    
    // ì •ìƒì ì¸ ì¸í„°ë²Œ ì¬ê°œ
    this.startChecking(this.currentFilePath);
  }
  
  async checkFileChange(filePath, silent = false) {
    const headers = {};
    if (this.lastModified) {
      headers['If-Modified-Since'] = this.lastModified;
    }
    
    try {
      const response = await fetch(`/api/files/${filePath}/check`, {
        method: 'GET',
        headers: headers
      });
      
      if (response.status === 200) {
        // íŒŒì¼ì´ ë³€ê²½ë¨
        const data = await response.json();
        this.lastModified = data.lastModified;
        
        if (!silent) {
          // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ë˜ëŠ” ìë™ ìƒˆë¡œê³ ì¹¨
          this.reloadContent(data.content);
        }
      } else if (response.status === 304) {
        // íŒŒì¼ì´ ë³€ê²½ë˜ì§€ ì•ŠìŒ
        // ì•„ë¬´ ì‘ì—…ë„ í•˜ì§€ ì•ŠìŒ
      }
    } catch (error) {
      console.error('File change check failed:', error);
    }
  }
  
  reloadContent(content) {
    // ì½˜í…ì¸  ìƒˆë¡œê³ ì¹¨ ë¡œì§
    // ë˜ëŠ” ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í‘œì‹œ
  }
}
```

#### 5. ë°±ì—”ë“œ êµ¬í˜„ ì˜ˆì‹œ (Spring Boot)

```java
@RestController
@RequestMapping("/api/files")
public class FileController {
    
    @GetMapping("/{path}/check")
    public ResponseEntity<?> checkFileModified(
            @PathVariable String path,
            @RequestHeader(value = "If-Modified-Since", required = false) 
            String ifModifiedSince) {
        
        File file = fileService.getFile(path);
        long lastModified = file.lastModified();
        
        if (ifModifiedSince != null) {
            try {
                long clientLastModified = Instant.parse(ifModifiedSince)
                    .toEpochMilli();
                
                if (lastModified <= clientLastModified) {
                    // íŒŒì¼ì´ ë³€ê²½ë˜ì§€ ì•ŠìŒ
                    return ResponseEntity.status(HttpStatus.NOT_MODIFIED).build();
                }
            } catch (Exception e) {
                // íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì „ì²´ ì½˜í…ì¸  ë°˜í™˜
            }
        }
        
        // íŒŒì¼ì´ ë³€ê²½ë¨
        String content = fileService.readFile(path);
        String html = markdownService.renderMarkdown(content);
        
        return ResponseEntity.ok()
            .header("Last-Modified", Instant.ofEpochMilli(lastModified)
                .toString())
            .body(Map.of(
                "modified", true,
                "lastModified", lastModified,
                "content", html
            ));
    }
}
```

### ì¥ì 

1. **ë¦¬ì†ŒìŠ¤ ì ˆì•½**: ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ë°©ì§€
2. **ë°°í„°ë¦¬ ì ˆì•½**: ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ë°°í„°ë¦¬ ìˆ˜ëª… ì—°ì¥
3. **ì„œë²„ ë¶€í•˜ ê°ì†Œ**: ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ê°ì†Œë¡œ ì„œë²„ ë¦¬ì†ŒìŠ¤ ì ˆì•½
4. **ì‚¬ìš©ì ê²½í—˜**: ì‚¬ìš©ìê°€ ë³´ê³  ìˆì§€ ì•Šì„ ë•ŒëŠ” ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šì•„ í˜¼ë€ ë°©ì§€
5. **í™•ì¥ì„±**: ëŒ€ëŸ‰ì˜ ì‚¬ìš©ìê°€ ìˆì„ ë•Œ ì„œë²„ ë¶€í•˜ë¥¼ í¬ê²Œ ì¤„ì„

### ë¸Œë¼ìš°ì € í˜¸í™˜ì„±

- **Chrome/Edge**: ì™„ì „ ì§€ì› (ëª¨ë“  ë²„ì „)
- **Firefox**: ì™„ì „ ì§€ì› (ëª¨ë“  ë²„ì „)
- **Safari**: ì™„ì „ ì§€ì› (Safari 7+)
- **ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €**: iOS Safari, Chrome Mobile ëª¨ë‘ ì§€ì›

---

## ì‚¬ìš©ìë³„ í´ë” ê´€ë¦¬ êµ¬ì¡°

### ê°œìš”
Google ë¡œê·¸ì¸ì„ í†µí•´ ì¸ì¦ëœ ê° ì‚¬ìš©ìëŠ” ë…ë¦½ì ì¸ í´ë” êµ¬ì¡°ë¥¼ ê°€ì§€ë©°, ìì‹ ì˜ íŒŒì¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„° ê²©ë¦¬ì™€ ë³´ì•ˆì„ ë³´ì¥í•©ë‹ˆë‹¤.

### í´ë” êµ¬ì¡°

```
/markdown-viewer-data/
â”‚
â”œâ”€â”€ users/
â”‚   â”‚
â”‚   â”œâ”€â”€ {userId1}/                    # ì‚¬ìš©ì 1ì˜ í´ë”
â”‚   â”‚   â”œâ”€â”€ files/                    # ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì €ì¥ ìœ„ì¹˜
â”‚   â”‚   â”‚   â”œâ”€â”€ document1.md
â”‚   â”‚   â”‚   â”œâ”€â”€ document2.md
â”‚   â”‚   â”‚   â””â”€â”€ subfolder/
â”‚   â”‚   â”‚       â””â”€â”€ document3.md
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ .metadata/                # ì‚¬ìš©ì ë©”íƒ€ë°ì´í„° (ì„ íƒì )
â”‚   â”‚       â””â”€â”€ preferences.json
â”‚   â”‚
â”‚   â”œâ”€â”€ {userId2}/                    # ì‚¬ìš©ì 2ì˜ í´ë”
â”‚   â”‚   â””â”€â”€ files/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ {userId3}/                    # ì‚¬ìš©ì 3ì˜ í´ë”
â”‚       â””â”€â”€ files/
â”‚           â””â”€â”€ ...
â”‚
â””â”€â”€ shared/                           # ê³µìœ  íŒŒì¼ (í–¥í›„ í™•ì¥)
    â””â”€â”€ ...
```

### ì‚¬ìš©ì ID ìƒì„± ê·œì¹™

**Google OAuthì—ì„œ ì œê³µí•˜ëŠ” ì •ë³´:**
- `sub`: Google ê³ ìœ  ì‚¬ìš©ì ID (ì˜ˆ: `123456789012345678901`)
- `email`: Google ì´ë©”ì¼ ì£¼ì†Œ (ì˜ˆ: `user@example.com`)
- `name`: ì‚¬ìš©ì ì´ë¦„
- `picture`: í”„ë¡œí•„ ì‚¬ì§„ URL

**ì‚¬ìš©ì ID ê²°ì • ì „ëµ:**
1. **Google `sub` ì‚¬ìš©**: ê°€ì¥ ì•ˆì „í•˜ê³  ê³ ìœ í•œ ì‹ë³„ì
   - ì¥ì : ë³€ê²½ ë¶ˆê°€ëŠ¥, ê³ ìœ ì„± ë³´ì¥
   - ë‹¨ì : ê¸´ ìˆ«ì ë¬¸ìì—´

2. **ì´ë©”ì¼ ê¸°ë°˜ í•´ì‹œ**: ì´ë©”ì¼ì„ í•´ì‹œí•˜ì—¬ ì‚¬ìš©
   - ì¥ì : ì½ê¸° ì‰¬ìš´ í´ë”ëª…
   - ë‹¨ì : ì´ë©”ì¼ ë³€ê²½ ì‹œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

3. **í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼**: ë°ì´í„°ë² ì´ìŠ¤ì— ë§¤í•‘ í…Œì´ë¸” ì‚¬ìš©
   - `users` í…Œì´ë¸”ì— `google_sub`, `email`, `user_id` ì €ì¥
   - `user_id`ëŠ” ì§§ì€ UUID ë˜ëŠ” ìˆœì°¨ì  ID ì‚¬ìš©
   - í´ë”ëª…ì€ `user_id` ì‚¬ìš©

**ê¶Œì¥ ë°©ì‹: í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼**
```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    google_sub VARCHAR(255) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255),
    picture_url TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

#### 1. ê²½ë¡œ ê²€ì¦
ëª¨ë“  íŒŒì¼ ì ‘ê·¼ ìš”ì²­ì—ì„œ ì‚¬ìš©ì IDì™€ ê²½ë¡œë¥¼ ê²€ì¦:

```java
public void validateUserPath(String userId, String requestedPath) {
    // ê²½ë¡œê°€ ì‚¬ìš©ì í´ë”ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
    String userFolder = "/users/" + userId + "/";
    if (!requestedPath.startsWith(userFolder)) {
        throw new SecurityException("Access denied: Invalid path");
    }
    
    // Path Traversal ê³µê²© ë°©ì§€
    Path normalizedPath = Paths.get(requestedPath).normalize();
    if (!normalizedPath.toString().startsWith(userFolder)) {
        throw new SecurityException("Access denied: Path traversal detected");
    }
}
```

#### 2. íŒŒì¼ ê¶Œí•œ
- ê° ì‚¬ìš©ìëŠ” ìì‹ ì˜ í´ë”(`/users/{userId}/`)ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- ë‹¤ë¥¸ ì‚¬ìš©ìì˜ í´ë” ì ‘ê·¼ ì‹œë„ëŠ” ì¦‰ì‹œ ì°¨ë‹¨
- íŒŒì¼ ì‹œìŠ¤í…œ ë ˆë²¨ì—ì„œë„ ê¶Œí•œ ì„¤ì • (chmod 700)

#### 3. JWT í† í° ê²€ì¦
ëª¨ë“  API ìš”ì²­ì—ì„œ JWT í† í°ì„ ê²€ì¦í•˜ê³  ì‚¬ìš©ì IDë¥¼ ì¶”ì¶œ:

```java
@PreAuthorize("hasRole('USER')")
@GetMapping("/api/files/{path}")
public ResponseEntity<?> getFile(@PathVariable String path) {
    String userId = getCurrentUserId(); // JWTì—ì„œ ì¶”ì¶œ
    validateUserPath(userId, path);
    // ... íŒŒì¼ ì½ê¸° ë¡œì§
}
```

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

#### Users í…Œì´ë¸”
```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    google_sub VARCHAR(255) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255),
    picture_url TEXT,
    storage_quota BIGINT DEFAULT 1073741824, -- 1GB ê¸°ë³¸ í• ë‹¹ëŸ‰
    storage_used BIGINT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login_at TIMESTAMP
);

CREATE INDEX idx_users_google_sub ON users(google_sub);
CREATE INDEX idx_users_email ON users(email);
```

#### íŒŒì¼ ë©”íƒ€ë°ì´í„° í…Œì´ë¸” (ì„ íƒì )
```sql
CREATE TABLE file_metadata (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id),
    file_path VARCHAR(1024) NOT NULL,
    file_name VARCHAR(255) NOT NULL,
    file_size BIGINT,
    mime_type VARCHAR(100),
    last_modified TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, file_path)
);

CREATE INDEX idx_file_metadata_user_path ON file_metadata(user_id, file_path);
```

### ì‚¬ìš©ì í´ë” ìƒì„± í”„ë¡œì„¸ìŠ¤

```
[User logs in with Google]
  â”‚
  â–¼
[AuthService.createOrUpdateUser(googleUserInfo)]
  â”‚
  â”‚ 1. Check if user exists (by google_sub)
  â”‚
  â”œâ”€ User Exists â”€â”€â–º [Update last_login_at]
  â”‚                     â”‚
  â”‚                     â””â”€â–º [Return existing user]
  â”‚
  â””â”€ New User â”€â”€â–º [Create user record in database]
                    â”‚
                    â”‚ 2. Generate user folder path
                    â”‚    /users/{userId}/
                    â”‚
                    â”‚ 3. Create directory structure
                    â”‚    - /users/{userId}/files/
                    â”‚    - /users/{userId}/.metadata/
                    â”‚
                    â”‚ 4. Set file permissions (700)
                    â”‚
                    â”‚ 5. Create default preferences.json
                    â”‚
                    â–¼
                 [Return new user]
```

### API ê²½ë¡œ ì˜ˆì‹œ

**ì‚¬ìš©ì íŒŒì¼ ëª©ë¡**
```
GET /api/files
Authorization: Bearer {jwt_token}

Response:
{
  "files": [
    {
      "name": "document1.md",
      "path": "/users/{userId}/files/document1.md",
      "size": 1024,
      "lastModified": "2026-01-29T10:30:00Z"
    }
  ]
}
```

**íŒŒì¼ ì½ê¸°**
```
GET /api/files/document1.md
Authorization: Bearer {jwt_token}

ì‹¤ì œ ê²½ë¡œ: /users/{userId}/files/document1.md
```

**íŒŒì¼ ì €ì¥**
```
POST /api/files/document1.md
Authorization: Bearer {jwt_token}
Body: { "content": "..." }

ì‹¤ì œ ê²½ë¡œ: /users/{userId}/files/document1.md
```

### í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

#### 1. ì‚¬ìš©ì ìˆ˜ ì¦ê°€ ì‹œ
- **ì´ˆê¸° (100-1000ëª…)**: ë‹¨ì¼ NAS íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ì¶©ë¶„
- **ì„±ì¥ (1000-5000ëª…)**: ì‚¬ìš©ìë³„ í´ë” êµ¬ì¡° ìœ ì§€, í•„ìš”ì‹œ ìƒ¤ë”© ê³ ë ¤
- **ëŒ€ê·œëª¨ (5000ëª…+)**: í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜, ì‚¬ìš©ìë³„ ë²„í‚· ë˜ëŠ” í”„ë¦¬í”½ìŠ¤ ì‚¬ìš©

#### 2. ì €ì¥ ê³µê°„ ê´€ë¦¬
- ì‚¬ìš©ìë³„ í• ë‹¹ëŸ‰ ì„¤ì • (ê¸°ë³¸ 1GB)
- ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼
- í•„ìš”ì‹œ í™•ì¥ ê°€ëŠ¥í•œ í• ë‹¹ëŸ‰ ì œê³µ

#### 3. ë°±ì—… ì „ëµ
- ì‚¬ìš©ìë³„ í´ë” ë‹¨ìœ„ ë°±ì—…
- ì¦ë¶„ ë°±ì—…ìœ¼ë¡œ íš¨ìœ¨ì„± í–¥ìƒ
- í´ë¼ìš°ë“œ ì „í™˜ ì‹œ ìë™ ë°±ì—… í†µí•©

---

## ë‹¤ìŒ ë‹¨ê³„

ì´ ì‹œìŠ¤í…œ êµ¬ì„±ë„ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‘ì„±í•  ì˜ˆì •ì…ë‹ˆë‹¤:

1. **ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ** - ìƒì„¸ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ ì •ì˜
2. **API ëª…ì„¸ì„œ** - REST API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸ ì •ì˜
3. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„** - ë©”íƒ€ë°ì´í„° ì €ì¥ êµ¬ì¡° (í•„ìš”ì‹œ)
4. **UI/UX ì„¤ê³„** - ë‹¨ì¼ í™”ë©´ ë·°ì–´ ìƒì„¸ ì„¤ê³„
5. **ë°°í¬ ê°€ì´ë“œ** - NAS ë°°í¬ ë° í´ë¼ìš°ë“œ ì „í™˜ ê°€ì´ë“œ
